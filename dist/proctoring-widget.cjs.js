"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react");var Kt={exports:{}},Nt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var en;function ln(){if(en)return Nt;en=1;var n=t,c=Symbol.for("react.element"),a=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function E(S,f,p){var d,g={},A=null,D=null;p!==void 0&&(A=""+p),f.key!==void 0&&(A=""+f.key),f.ref!==void 0&&(D=f.ref);for(d in f)m.call(f,d)&&!_.hasOwnProperty(d)&&(g[d]=f[d]);if(S&&S.defaultProps)for(d in f=S.defaultProps,f)g[d]===void 0&&(g[d]=f[d]);return{$$typeof:c,type:S,key:A,ref:D,props:g,_owner:x.current}}return Nt.Fragment=a,Nt.jsx=E,Nt.jsxs=E,Nt}var Wt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tn;function fn(){return tn||(tn=1,process.env.NODE_ENV!=="production"&&function(){var n=t,c=Symbol.for("react.element"),a=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),Z=Symbol.iterator,ce="@@iterator";function fe(e){if(e===null||typeof e!="object")return null;var r=Z&&e[Z]||e[ce];return typeof r=="function"?r:null}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function O(e){{for(var r=arguments.length,i=new Array(r>1?r-1:0),w=1;w<r;w++)i[w-1]=arguments[w];Fe("error",e,i)}}function Fe(e,r,i){{var w=U.ReactDebugCurrentFrame,T=w.getStackAddendum();T!==""&&(r+="%s",i=i.concat([T]));var N=i.map(function(k){return String(k)});N.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,N)}}var Me=!1,_e=!1,Oe=!1,Q=!1,ye=!1,B;B=Symbol.for("react.module.reference");function C(e){return!!(typeof e=="string"||typeof e=="function"||e===m||e===_||ye||e===x||e===p||e===d||Q||e===D||Me||_e||Oe||typeof e=="object"&&e!==null&&(e.$$typeof===A||e.$$typeof===g||e.$$typeof===E||e.$$typeof===S||e.$$typeof===f||e.$$typeof===B||e.getModuleId!==void 0))}function I(e,r,i){var w=e.displayName;if(w)return w;var T=r.displayName||r.name||"";return T!==""?i+"("+T+")":i}function Re(e){return e.displayName||"Context"}function K(e){if(e==null)return null;if(typeof e.tag=="number"&&O("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case m:return"Fragment";case a:return"Portal";case _:return"Profiler";case x:return"StrictMode";case p:return"Suspense";case d:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S:var r=e;return Re(r)+".Consumer";case E:var i=e;return Re(i._context)+".Provider";case f:return I(e,e.render,"ForwardRef");case g:var w=e.displayName||null;return w!==null?w:K(e.type)||"Memo";case A:{var T=e,N=T._payload,k=T._init;try{return K(k(N))}catch{return null}}}return null}var re=Object.assign,X=0,je,Ue,qe,Ke,Xe,o,l;function s(){}s.__reactDisabledLog=!0;function z(){{if(X===0){je=console.log,Ue=console.info,qe=console.warn,Ke=console.error,Xe=console.group,o=console.groupCollapsed,l=console.groupEnd;var e={configurable:!0,enumerable:!0,value:s,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}X++}}function L(){{if(X--,X===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:re({},e,{value:je}),info:re({},e,{value:Ue}),warn:re({},e,{value:qe}),error:re({},e,{value:Ke}),group:re({},e,{value:Xe}),groupCollapsed:re({},e,{value:o}),groupEnd:re({},e,{value:l})})}X<0&&O("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ue=U.ReactCurrentDispatcher,Le;function ke(e,r,i){{if(Le===void 0)try{throw Error()}catch(T){var w=T.stack.trim().match(/\n( *(at )?)/);Le=w&&w[1]||""}return`
`+Le+e}}var Ge=!1,Be;{var Ve=typeof WeakMap=="function"?WeakMap:Map;Be=new Ve}function gt(e,r){if(!e||Ge)return"";{var i=Be.get(e);if(i!==void 0)return i}var w;Ge=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var N;N=ue.current,ue.current=null,z();try{if(r){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(be){w=be}Reflect.construct(e,[],k)}else{try{k.call()}catch(be){w=be}e.call(k.prototype)}}else{try{throw Error()}catch(be){w=be}e()}}catch(be){if(be&&w&&typeof be.stack=="string"){for(var M=be.stack.split(`
`),xe=w.stack.split(`
`),te=M.length-1,oe=xe.length-1;te>=1&&oe>=0&&M[te]!==xe[oe];)oe--;for(;te>=1&&oe>=0;te--,oe--)if(M[te]!==xe[oe]){if(te!==1||oe!==1)do if(te--,oe--,oe<0||M[te]!==xe[oe]){var ge=`
`+M[te].replace(" at new "," at ");return e.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",e.displayName)),typeof e=="function"&&Be.set(e,ge),ge}while(te>=1&&oe>=0);break}}}finally{Ge=!1,ue.current=N,L(),Error.prepareStackTrace=T}var St=e?e.displayName||e.name:"",it=St?ke(St):"";return typeof e=="function"&&Be.set(e,it),it}function ut(e,r,i){return gt(e,!1)}function lt(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function he(e,r,i){if(e==null)return"";if(typeof e=="function")return gt(e,lt(e));if(typeof e=="string")return ke(e);switch(e){case p:return ke("Suspense");case d:return ke("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case f:return ut(e.render);case g:return he(e.type,r,i);case A:{var w=e,T=w._payload,N=w._init;try{return he(N(T),r,i)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,tt={},Ye=U.ReactDebugCurrentFrame;function Je(e){if(e){var r=e._owner,i=he(e.type,e._source,r?r.type:null);Ye.setExtraStackFrame(i)}else Ye.setExtraStackFrame(null)}function nt(e,r,i,w,T){{var N=Function.call.bind(me);for(var k in e)if(N(e,k)){var M=void 0;try{if(typeof e[k]!="function"){var xe=Error((w||"React class")+": "+i+" type `"+k+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[k]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw xe.name="Invariant Violation",xe}M=e[k](r,k,w,i,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(te){M=te}M&&!(M instanceof Error)&&(Je(T),O("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",w||"React class",i,k,typeof M),Je(null)),M instanceof Error&&!(M.message in tt)&&(tt[M.message]=!0,Je(T),O("Failed %s type: %s",i,M.message),Je(null))}}}var ft=Array.isArray;function rt(e){return ft(e)}function dt(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,i=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return i}}function yt(e){try{return Ie(e),!1}catch{return!0}}function Ie(e){return""+e}function ot(e){if(yt(e))return O("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",dt(e)),Ie(e)}var vt=U.ReactCurrentOwner,wt={key:!0,ref:!0,__self:!0,__source:!0},R,F;function P(e){if(me.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function Ee(e){if(me.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function pe(e,r){typeof e.ref=="string"&&vt.current}function ae(e,r){{var i=function(){R||(R=!0,O("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};i.isReactWarning=!0,Object.defineProperty(e,"key",{get:i,configurable:!0})}}function ee(e,r){{var i=function(){F||(F=!0,O("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};i.isReactWarning=!0,Object.defineProperty(e,"ref",{get:i,configurable:!0})}}var ve=function(e,r,i,w,T,N,k){var M={$$typeof:c,type:e,key:r,ref:i,props:k,_owner:N};return M._store={},Object.defineProperty(M._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(M,"_self",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.defineProperty(M,"_source",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.freeze&&(Object.freeze(M.props),Object.freeze(M)),M};function ze(e,r,i,w,T){{var N,k={},M=null,xe=null;i!==void 0&&(ot(i),M=""+i),Ee(r)&&(ot(r.key),M=""+r.key),P(r)&&(xe=r.ref,pe(r,T));for(N in r)me.call(r,N)&&!wt.hasOwnProperty(N)&&(k[N]=r[N]);if(e&&e.defaultProps){var te=e.defaultProps;for(N in te)k[N]===void 0&&(k[N]=te[N])}if(M||xe){var oe=typeof e=="function"?e.displayName||e.name||"Unknown":e;M&&ae(k,oe),xe&&ee(k,oe)}return ve(e,M,xe,T,w,vt.current,k)}}var at=U.ReactCurrentOwner,$e=U.ReactDebugCurrentFrame;function le(e){if(e){var r=e._owner,i=he(e.type,e._source,r?r.type:null);$e.setExtraStackFrame(i)}else $e.setExtraStackFrame(null)}var de;de=!1;function Te(e){return typeof e=="object"&&e!==null&&e.$$typeof===c}function we(){{if(at.current){var e=K(at.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function kt(e){return""}var xt={};function Et(e){{var r=we();if(!r){var i=typeof e=="string"?e:e.displayName||e.name;i&&(r=`

Check the top-level render call using <`+i+">.")}return r}}function bt(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var i=Et(r);if(xt[i])return;xt[i]=!0;var w="";e&&e._owner&&e._owner!==at.current&&(w=" It was passed a child from "+K(e._owner.type)+"."),le(e),O('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',i,w),le(null)}}function ht(e,r){{if(typeof e!="object")return;if(rt(e))for(var i=0;i<e.length;i++){var w=e[i];Te(w)&&bt(w,r)}else if(Te(e))e._store&&(e._store.validated=!0);else if(e){var T=fe(e);if(typeof T=="function"&&T!==e.entries)for(var N=T.call(e),k;!(k=N.next()).done;)Te(k.value)&&bt(k.value,r)}}}function Ct(e){{var r=e.type;if(r==null||typeof r=="string")return;var i;if(typeof r=="function")i=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===f||r.$$typeof===g))i=r.propTypes;else return;if(i){var w=K(r);nt(i,e.props,"prop",w,e)}else if(r.PropTypes!==void 0&&!de){de=!0;var T=K(r);O("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",T||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&O("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function st(e){{for(var r=Object.keys(e.props),i=0;i<r.length;i++){var w=r[i];if(w!=="children"&&w!=="key"){le(e),O("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",w),le(null);break}}e.ref!==null&&(le(e),O("Invalid attribute `ref` supplied to `React.Fragment`."),le(null))}}var V={};function W(e,r,i,w,T,N){{var k=C(e);if(!k){var M="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(M+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var xe=kt();xe?M+=xe:M+=we();var te;e===null?te="null":rt(e)?te="array":e!==void 0&&e.$$typeof===c?(te="<"+(K(e.type)||"Unknown")+" />",M=" Did you accidentally export a JSX literal instead of a component?"):te=typeof e,O("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",te,M)}var oe=ze(e,r,i,T,N);if(oe==null)return oe;if(k){var ge=r.children;if(ge!==void 0)if(w)if(rt(ge)){for(var St=0;St<ge.length;St++)ht(ge[St],e);Object.freeze&&Object.freeze(ge)}else O("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ht(ge,e)}if(me.call(r,"key")){var it=K(e),be=Object.keys(r).filter(function(Bt){return Bt!=="key"}),Tt=be.length>0?"{key: someKey, "+be.join(": ..., ")+": ...}":"{key: someKey}";if(!V[it+Tt]){var Ut=be.length>0?"{"+be.join(": ..., ")+": ...}":"{}";O(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Tt,it,Ut,it),V[it+Tt]=!0}}return e===m?st(oe):Ct(oe),oe}}function _t(e,r,i){return W(e,r,i,!0)}function mt(e,r,i){return W(e,r,i,!1)}var Ot=mt,jt=_t;Wt.Fragment=m,Wt.jsx=Ot,Wt.jsxs=jt}()),Wt}process.env.NODE_ENV==="production"?Kt.exports=ln():Kt.exports=fn();var u=Kt.exports;function on(n){const c=window.AudioContext||window.webkitAudioContext,a=new c,m=a.createMediaStreamSource(n),x=a.createAnalyser();x.fftSize=2048,x.smoothingTimeConstant=.85,m.connect(x);const _=new Uint8Array(x.fftSize);function E(){x.getByteTimeDomainData(_);let S=0;for(let f=0;f<_.length;f++){const p=(_[f]-128)/128;S+=p*p}return Math.sqrt(S/_.length)}return{getLevel:()=>E(),dispose:async()=>{try{m.disconnect()}catch{}try{x.disconnect()}catch{}try{await a.close()}catch{}}}}let qt=null;async function dn(){if(qt)return qt;const n=await Promise.resolve().then(()=>require("./blazeface.esm-BsJ4BrW4.cjs")),c=await Promise.resolve().then(()=>require("./index-x7BUnCGZ.cjs"));return c.ready&&await c.ready(),qt=await n.load(),qt}function nn(n,c,a){if(n.width<=0||n.height<=0||c<=0||a<=0)return!1;const m=Math.max(6,Math.floor(c*.06)),x=Math.max(6,Math.floor(a*.06));if(n.x<m||n.y<x||n.x+n.width>c-m||n.y+n.height>a-x)return!1;const _=n.width*n.height,E=c*a,S=_/E;if(S<.04||S>.65)return!1;const f=n.width/n.height;return!(f<.6||f>1.6)}async function hn(n){if("FaceDetector"in window)try{const a=await new window.FaceDetector({fastMode:!0,maxDetectedFaces:1}).detect(n);if(a&&a.length>0){const m=a[0]?.boundingBox,x=n.videoWidth||n.width||0,_=n.videoHeight||n.height||0;if(m){const E={x:m.x,y:m.y,width:m.width,height:m.height};if(nn(E,x,_))return{present:!0,confidence:.85}}}return{present:!1,confidence:0}}catch{}try{const a=await(await dn()).estimateFaces(n,!1);if(a&&a.length>0){const m=n.videoWidth||n.width||0,x=n.videoHeight||n.height||0;for(const _ of a){const[E,S]=_.topLeft,[f,p]=_.bottomRight,d={x:E,y:S,width:f-E,height:p-S};if(nn(d,m,x)){const g=_.probability?_.probability[0]:.75;return{present:!0,confidence:Math.max(.6,Math.min(1,g))}}}}}catch{}return{present:!1,confidence:0}}function an({onComplete:n,onError:c}){const a=["camera","microphone","face","monitor","browser"],[m,x]=t.useState({camera:"pending",microphone:"pending",face:"pending",monitor:"pending",browser:"pending"}),[_,E]=t.useState(0),[S,f]=t.useState(0),[p,d]=t.useState({}),[g,A]=t.useState({}),D=t.useRef(null),Z=t.useRef(null),ce=t.useRef(null),fe=t.useRef(null),U=t.useRef(null),O=()=>{try{D.current?.getTracks().forEach(o=>o.stop())}catch{}try{Z.current?.getTracks().forEach(o=>o.stop())}catch{}D.current=null,Z.current=null,ce.current&&(ce.current.dispose().catch(()=>{}),ce.current=null),fe.current&&(cancelAnimationFrame(fe.current),fe.current=null)},Fe=async o=>{try{const l=window.AudioContext||window.webkitAudioContext;if(!l)throw new Error("AudioContext not supported");const s=new l,z=s.createMediaStreamSource(o),L=s.createAnalyser();L.fftSize=256,L.smoothingTimeConstant=.8,z.connect(L);const ue=new Uint8Array(L.frequencyBinCount);L.getByteFrequencyData(ue),sessionStorage.setItem("audio-context-initialized","true"),z.disconnect(),await s.close(),typeof window<"u"&&(window.precheckAudioStream=o)}catch{sessionStorage.setItem("audio-context-initialized","false")}},Me=async o=>{const l=U.current;let s=0,z=0,L=0;const ue=30;for(;L<ue&&s<5;){try{const ke=await hn(l);ke.present&&(s+=1,z=Math.max(z,ke.confidence))}catch{}L++,E(L),await new Promise(ke=>setTimeout(ke,100))}return{status:s>=5,confidence:z,timestamp:Date.now()}};function _e(){return"isExtended"in window.screen?window.screen.isExtended:window.screen.availWidth>window.screen.width||window.screenLeft!==0||window.screenTop!==0||window.matchMedia("(display-mode: extended)").matches}const Oe=()=>{try{const o=window.screen.width,l=window.screen.height,s=window.screen.availWidth;return o/l>3||o>s*1.5||[3840,3360,2560,4480,5120].includes(o)?2:1}catch{return 1}},Q=async()=>Oe(),ye=()=>["navigator.mediaDevices","navigator.mediaDevices.getUserMedia","requestAnimationFrame","WebAssembly"].every(l=>{const s=l.split(".");let z=window;for(const L of s){if(!(L in z))return!1;z=z[L]}return!0}),B=(o,l)=>{x(s=>({...s,[o]:l}))},C=t.useCallback(async()=>{B("camera","running"),d(o=>({...o,camera:""}));try{try{D.current?.getTracks().forEach(l=>l.stop())}catch{}const o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15}}});if(D.current=o,!U.current){const l=document.createElement("video");l.muted=!0,l.playsInline=!0,U.current=l}U.current.srcObject=o;try{await U.current.play()}catch{}return A(l=>({...l,cameraAccess:!0})),B("camera","passed"),!0}catch(o){const l=o?.name==="NotAllowedError"?"Camera permission denied":o?.message||"Camera access failed";return d(s=>({...s,camera:l})),B("camera","failed"),!1}},[]),I=t.useCallback(async()=>{B("microphone","running"),d(o=>({...o,microphone:""}));try{try{Z.current?.getTracks().forEach(l=>l.stop())}catch{}const o=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});Z.current=o,A(l=>({...l,microphoneAccess:!0})),await Fe(o);try{const l=on(o);ce.current=l;const s=()=>{f(l.getLevel()),fe.current=requestAnimationFrame(s)};fe.current=requestAnimationFrame(s)}catch{}return B("microphone","passed"),!0}catch(o){const l=o?.name==="NotAllowedError"?"Microphone permission denied":o?.message||"Microphone access failed";return d(s=>({...s,microphone:l})),B("microphone","failed"),!1}},[]),Re=t.useCallback(async()=>{B("face","running"),d(o=>({...o,face:""}));try{if(!D.current)throw new Error("Camera is not initialized");const o=await Me(D.current);if(A(l=>({...l,faceDetection:o})),o.status)return B("face","passed"),!0;throw new Error("No face detected. Please align your face within the frame and retry.")}catch(o){const l=o?.message||"Face detection failed";return d(s=>({...s,face:l})),B("face","failed"),!1}},[]),K=t.useCallback(async()=>{B("monitor","running"),d(o=>({...o,monitor:""}));try{const o=await Q();if(o&&o>1||_e())throw A(l=>({...l,monitorCount:o})),new Error("Multiple displays detected. Please remove external screens and keep only one display connected, then press Retry.");if(o===1)return A(l=>({...l,monitorCount:o})),B("monitor","passed"),!0;throw new Error("Could not verify displays")}catch(o){return d(l=>({...l,monitor:o?.message||"Monitor verification failed"})),B("monitor","failed"),!1}},[]),re=t.useCallback(async()=>{B("browser","running"),d(o=>({...o,browser:""}));try{const o=ye();if(A(l=>({...l,browserSupport:o})),!o)throw new Error("Required browser features are unavailable");return B("browser","passed"),!0}catch(o){return d(l=>({...l,browser:o?.message||"Browser not supported"})),B("browser","failed"),!1}},[]),X={camera:C,microphone:I,face:Re,monitor:K,browser:re},je=t.useCallback(async o=>{for(let l=o;l<a.length;l++){const s=a[l];if(!await X[s]())break}},[X]);t.useEffect(()=>{if(!a.every(s=>m[s]==="passed"))return;const l={cameraAccess:!!g.cameraAccess,microphoneAccess:!!g.microphoneAccess,faceDetection:g.faceDetection||{status:!1,confidence:0,timestamp:Date.now()},monitorCount:g.monitorCount||1,browserSupport:!!g.browserSupport,codeEditorReady:!0};n(l),O()},[m,g]),t.useEffect(()=>(je(0),()=>O()),[]);const Ue=o=>{const l=a.indexOf(o);x(s=>{const z={...s};for(let L=l;L<a.length;L++)z[a[L]]="pending";return z}),d(s=>({...s,[o]:""})),je(l)},qe=a.filter(o=>m[o]==="passed").length,Ke=a.some(o=>m[o]==="running"),Xe=Math.round((qe+(Ke?.5:0))/a.length*100);return u.jsx("div",{style:{fontFamily:"system-ui, sans-serif",minHeight:"100vh",display:"grid",placeItems:"center",background:"linear-gradient(135deg,#eff6ff,#eef2ff)"},children:u.jsxs("div",{style:{width:720,maxWidth:"95vw",background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:16,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[u.jsx("h2",{style:{margin:0,fontSize:20,fontWeight:700},children:"System Pre-Check"}),u.jsx("p",{style:{color:"#6b7280"},children:"Verifying your system for proctored assessment"})]}),u.jsxs("div",{style:{marginBottom:16},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12},children:[u.jsx("span",{children:"Overall Progress"}),u.jsxs("span",{children:[Xe,"%"]})]}),u.jsx("div",{style:{height:8,background:"#f3f4f6",borderRadius:9999,overflow:"hidden"},children:u.jsx("div",{style:{width:`${Xe}%`,height:8,background:"#3b82f6"}})})]}),u.jsx("div",{style:{display:"grid",gap:8},children:a.map(o=>{const l=o==="camera"?"Camera Access":o==="microphone"?"Microphone Access":o==="face"?"Face Detection":o==="monitor"?"Single Monitor Check":"Browser Support",s=m[o],z=s==="passed"?"#ecfdf5":s==="running"?"#eff6ff":s==="failed"?"#fef2f2":"#f9fafb",L=s==="passed"?"#10b981":s==="running"?"#3b82f6":s==="failed"?"#dc2626":"#9ca3af";return u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"16px 1fr auto",gap:12,alignItems:"center",padding:12,borderRadius:8,border:"1px solid #e5e7eb",background:z},children:[u.jsx("div",{style:{width:12,height:12,borderRadius:9999,background:L}}),u.jsxs("div",{style:{minWidth:0},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:u.jsx("div",{style:{fontWeight:600,fontSize:14},children:l})}),o==="face"&&u.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginTop:8},children:[u.jsx("video",{ref:U,muted:!0,playsInline:!0,autoPlay:!0,style:{width:180,height:112,background:"#000",borderRadius:6}}),s==="running"&&u.jsxs("div",{style:{color:"#6b7280",fontSize:12},children:["Analyzing frames: ",_]})]}),o==="microphone"&&s!=="pending"&&u.jsx("div",{style:{marginTop:6,width:220,height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(100,Math.round(S*200))}%`,height:8,background:"#10b981",transition:"width 150ms"}})}),p[o]&&u.jsx("div",{style:{marginTop:6,color:"#dc2626",fontSize:12},children:p[o]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("div",{style:{fontSize:12,padding:"2px 8px",borderRadius:9999,background:s==="passed"?"#111827":s==="failed"?"#fee2e2":"#e5e7eb",color:s==="passed"?"#fff":"#111827"},children:s==="passed"?"Passed":s==="running"?"Checking…":s==="failed"?"Failed":"Pending"}),s==="failed"&&u.jsx("button",{onClick:()=>Ue(o),style:{fontSize:12,padding:"6px 10px",borderRadius:6,background:"#111827",color:"#fff",border:0},children:"Retry"})]})]},o)})})]})})}function mn(n){const{onEvent:c,context:a="coding"}=n||{},[m,x]=t.useState("idle"),[_,E]=t.useState(void 0),[S,f]=t.useState(0),[p,d]=t.useState(0),g=t.useRef(null),A=t.useRef(null),D=t.useRef(null),Z=t.useRef(!1),ce=t.useRef(!1),fe=t.useRef(null),U=t.useRef(0),O=t.useRef(null),Fe=t.useRef(0),Me=t.useCallback(()=>{D.current&&cancelAnimationFrame(D.current),D.current=null;try{g.current?.dispose()}catch{}g.current=null;try{A.current?.getTracks().forEach(C=>C.stop())}catch{}A.current=null,x("idle")},[]),_e=t.useCallback(C=>{const I=Date.now(),Re=4,K=30,re=ce.current||!!fe.current&&U.current>K||U.current>K,X=C>=Re;re&&X?(O.current==null&&(O.current=I),I-(O.current??I)>1200&&I-Fe.current>2e3&&(d(Ue=>Ue+1),Fe.current=I,O.current=null,c?.({eventType:"audio_anomaly",severity:"warning",context:a,data:{level:C,lipsActivityPct:U.current,reason:"audio_with_lips"}}))):O.current=null},[a,c]),Oe=t.useCallback(()=>{try{if(!g.current)return;const C=g.current.getLevel(),I=Math.max(0,Math.min(100,Math.round(C*160)));f(I),_e(I)}finally{D.current=requestAnimationFrame(Oe)}},[_e]),Q=t.useCallback(async C=>{try{E(void 0),d(0),O.current=null,Fe.current=0;let I=C;if(!I&&typeof window<"u"&&window.precheckAudioStream){const re=window.precheckAudioStream;re?.active&&re.getAudioTracks().length>0&&(I=re)}I||(I=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}})),A.current=I;const Re=I.getAudioTracks(),K=Re.length?new MediaStream(Re):I;g.current=on(K),x("running"),D.current=requestAnimationFrame(Oe)}catch(I){x("error"),E(I instanceof Error?I.message:String(I))}},[Oe]),ye=t.useCallback(C=>{Z.current=C},[]),B=t.useCallback(C=>{typeof C.moving=="boolean"&&(ce.current=C.moving),typeof C.open<"u"&&(fe.current=C.open),typeof C.activityPct=="number"&&!Number.isNaN(C.activityPct)&&(U.current=Math.max(0,Math.min(100,Math.round(C.activityPct))))},[]);return t.useEffect(()=>Me,[Me]),{status:m,error:_,level:S,anomalyCount:p,start:Q,stop:Me,setFaceDetected:ye,setMouthState:B}}function Pt(n){return Math.max(0,Math.min(1,n))}function rn(n){let c=0;for(const m in n)c+=n[m];if(c<=0)return n;const a={};for(const m in n)a[m]=n[m]/c;return a}function pn(n={}){const c=n.alpha??.45;let a=null;const m=["neutral","happy","surprised","focused","concerned"];function x(_,E={}){const{landmarks:S,headPose:f}=E,{data:p,width:d,height:g}=_;let A=0,D=0,Z=0;for(let R=0;R<g;R++)for(let F=0;F<d;F++){const P=(R*d+F)*4,Ee=p[P],pe=p[P+1],ae=p[P+2],ee=(Ee+pe+ae)/3;if(A+=ee,F>0){const ve=(R*d+(F-1))*4,ze=(p[ve]+p[ve+1]+p[ve+2])/3;D+=Math.abs(ee-ze)}if(R>0){const ve=((R-1)*d+F)*4,ze=(p[ve]+p[ve+1]+p[ve+2])/3;Math.abs(ee-ze)>26&&Z++}}const ce=Math.max(1,p.length/4),fe=A/ce,U=D/ce,O=Z/ce,Fe=Math.floor(g*.6),Me=Math.floor(d*.22),_e=Math.ceil(d*.78);let Oe=0,Q=0,ye=0,B=0,C=0,I=0,Re=0,K=0;const re=Math.max(2,Math.floor((_e-Me)*.18));let X=0,je=0,Ue=0,qe=0;for(let R=Fe;R<g;R++)for(let F=Me;F<_e;F++){const P=(R*d+F)*4,Ee=p[P],pe=p[P+1],ae=p[P+2],ee=(Ee+pe+ae)/3,ve=(p[P-4]+p[P-3]+p[P-2])/3,ze=(p[P+4]+p[P+5]+p[P+6])/3;(Math.abs(ee-ve)>24||Math.abs(ee-ze)>24)&&Oe++,ee<70&&ye++,ee>165&&B++,R<Fe+Math.floor((g-Fe)*.4)?(C+=ee,I++):(Re+=ee,K++),F<Me+re&&((Math.abs(ee-ve)>24||Math.abs(ee-ze)>24)&&X++,je++),F>_e-re&&((Math.abs(ee-ve)>24||Math.abs(ee-ze)>24)&&Ue++,qe++),Q++}const Ke=Q?Oe/Q:0,Xe=Q?ye/Q:0,o=Q?B/Q:0,l=Pt((Ke-.012)/.06),s=I?C/I:0,z=K?Re/K:0,L=Pt((s-z-6)/28),ue=je?X/je:0,Le=qe?Ue/qe:0,ke=Pt(((ue+Le)/2-.018)/.05);let Ge=0,Be=0;const Ve=Math.max(0,Math.floor(g*.18)),gt=Math.floor(g*.38);for(let R=Ve;R<gt;R++)for(let F=1;F<d-1;F++){const P=(R*d+F)*4,Ee=(p[P]+p[P+1]+p[P+2])/3,pe=(p[P-4]+p[P-3]+p[P-2])/3,ae=(p[P+4]+p[P+5]+p[P+6])/3;(Math.abs(Ee-pe)>26||Math.abs(Ee-ae)>26)&&Ge++,Be++}const ut=Be?Ge/Be:0,lt=Pt((ut-.012)/.06);let he=.5;if(S&&S.length>=2){const R=S[0],F=S[1],P=Math.abs(F[1]-R[1]);he=Pt(1-P/Math.max(1,g*.25))}const me=f?Math.min(45,Math.abs(f.yaw)):0,tt=f?Math.min(45,Math.abs(f.pitch)):0,Ye=Math.max(0,1-(me/35+tt/30)/2),Je=Pt((U-12)/18),nt=l>.22,ft=Xe>.12,rt=lt>.2,dt=!nt&&!rt,yt={neutral:Math.max(.001,.28+.28*Ye+.06*he-.16*l-.06*O+(dt?.08:0)),happy:Math.max(.001,.1+.62*l+.08*L+.06*ke+(ft?.04:0)+(o>.15?.04:0)-.1*(1-Ye)),surprised:Math.max(.001,.06+(nt&&ft?.16:.02)+.45*l+(f&&f.pitch>10?.1:0)),focused:Math.max(.001,.18+.6*Ye+.22*Je+.06*he-.08*l+(dt?.06:0)),concerned:Math.max(.001,.06+(rt?.16:.02)+.45*lt+(fe<100?.06:0)+(f&&f.pitch<-10?.06:0)-.06*(L+l))};let Ie=rn(yt);if(a){const R={...a};for(const F of m)R[F]=(1-c)*a[F]+c*Ie[F];Ie=rn(R)}a=Ie;let ot="neutral",vt=-1;for(const R of m){const F=Ie[R];F>vt&&(vt=F,ot=R)}const wt=Ie[ot];return{dominant:ot,confidence:wt,emotions:Ie}}return{analyze:x}}let Gt,Yt;async function gn(n){if(Gt&&Yt)return{FaceLandmarker:Gt,FilesetResolver:Yt};const c=await Promise.resolve().then(()=>require("./vision_bundle-9Th4cf2B.cjs"));return Gt=c.FaceLandmarker,Yt=c.FilesetResolver,{FaceLandmarker:Gt,FilesetResolver:Yt}}async function yn(n={}){const c=n.wasmRoot||"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm",a=n.modelAssetPath||"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/latest/face_landmarker.task",m=n.runningMode||"VIDEO",{FaceLandmarker:x,FilesetResolver:_}=await gn(),E=await _.forVisionTasks(c),S=await x.createFromOptions(E,{baseOptions:{modelAssetPath:a},runningMode:m,numFaces:1,minFaceDetectionConfidence:.2,minFacePresenceConfidence:.2,minTrackingConfidence:.2,outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}),f={horiz:n.thresholds?.horiz??.45,vert:n.thresholds?.vert??.65,yaw:n.thresholds?.yaw??21,pitch:n.thresholds?.pitch??24,offDwell:n.thresholds?.offDwell??6,onDwell:n.thresholds?.onDwell??5,calibFrames:n.thresholds?.calibFrames??45};let p={x:0,y:0};const d=.35;let g=0,A=0,D=null,Z=0,ce=0,fe=0,U=0,O=0;const Fe=3,Me=2,_e=3,Oe=2;let Q=!0,ye=0;const B=f.calibFrames;let C={x:0,y:0};const I=f.offDwell,Re=f.onDwell;async function K(X,je){if(!X||!S)return null;const Ue=je??performance.now(),qe=X.videoWidth||X.width||0,Ke=X.videoHeight||X.height||0,Xe=X.readyState??0;if(!qe||!Ke||Xe<2)return null;const o=S.detectForVideo(X,Ue);if(!o||!o.faceLandmarks||o.faceLandmarks.length===0)return null;const l=o.faceBlendshapes?.[0]?.categories||[],s=V=>l.find(W=>W.categoryName===V)?.score||0,z=s("eyeLookInLeft"),L=s("eyeLookOutLeft"),ue=s("eyeLookUpLeft"),Le=s("eyeLookDownLeft"),ke=s("eyeLookInRight"),Ge=s("eyeLookOutRight"),Be=s("eyeLookUpRight"),Ve=s("eyeLookDownRight"),gt=Ge-ke,ut=z-L,lt=Be-Ve,he=ue-Le;let me=(gt+ut)/2,tt=(lt+he)/2;me=Math.max(-1,Math.min(1,me)),tt=Math.max(-1,Math.min(1,tt)),p.x=d*me+(1-d)*p.x,p.y=d*tt+(1-d)*p.y;const Ye=s("jawOpen"),Je=s("mouthOpen"),nt=s("mouthFunnel"),ft=s("mouthPucker"),rt=s("mouthSmileLeft"),dt=s("mouthSmileRight"),yt=s("mouthPressLeft"),Ie=s("mouthPressRight"),ot=s("mouthStretchLeft"),vt=s("mouthStretchRight"),wt=s("mouthLowerDownLeft"),R=s("mouthLowerDownRight"),F=s("mouthUpperUpLeft"),P=s("mouthUpperUpRight"),Ee=[Ye,Je,nt,ft,rt,dt,yt,Ie,ot,vt,wt,R,F,P];let pe=0;if(D!=null)for(let V=0;V<Ee.length;V++)pe+=Math.abs(Ee[V]-D[V]);D=Ee,Z=.3*pe+.7*Z;let ae=Math.max(Je,Ye);const ee=Math.max(0,(wt+R+F+P)/4);ae=Math.max(ae,ee),ae=Math.max(0,Math.min(1,ae));const ve=ae>.35,ze=Z>.06;ve?(ce++,fe=Math.max(0,fe-1)):(fe++,ce=Math.max(0,ce-1)),ze?(U++,O=Math.max(0,O-1)):(O++,U=Math.max(0,U-1));const at=ce>=Fe?!0:fe>=Me?!1:void 0,$e=U>=_e?!0:O>=Oe?!1:void 0;Q&&(Math.abs(p.x)<.6&&Math.abs(p.y)<.6&&(C.x=(C.x*ye+p.x)/(ye+1),C.y=(C.y*ye+p.y)/(ye+1),ye+=1),ye>=B&&(Q=!1));const le=p.x-C.x,de=p.y-C.y;let Te,we;try{const V=o.facialTransformationMatrixes?.[0];if(V&&V.rows===4&&V.columns===4){const W=V.data,_t=W[0],mt=W[1],Ot=W[2],jt=W[4],e=W[5],r=W[6],i=W[8],w=W[9],T=W[10];we=Math.atan2(-w,T)*(180/Math.PI),Te=Math.atan2(-Ot,_t)*(180/Math.PI)}}catch{}const kt=Math.abs(le),xt=Math.abs(de),Et=kt>f.horiz,bt=xt>f.vert,ht=Te!==void 0&&Math.abs(Te)>f.yaw||we!==void 0&&Math.abs(we)>f.pitch,Ct=Et||bt||ht;let st=!0;return Ct?(g+=1,A=Math.max(0,A-1)):(A+=1,g=Math.max(0,g-1)),g>=I&&(st=!1),A>=Re&&(st=!0),{onScreen:st,gaze:{x:le,y:de},confidence:Math.min(1,.65+.35*Math.max(kt,xt)),head:{yaw:Te,pitch:we},debug:{lIn:z,lOut:L,lUp:ue,lDn:Le,rIn:ke,rOut:Ge,rUp:Be,rDn:Ve,gx:me,gy:tt,emaX:p.x,emaY:p.y,yaw:Te??0,pitch:we??0,offFrames:g,onFrames:A,baseX:C.x,baseY:C.y,absX:kt,absY:xt,jawOpen:Ye,mouthOpenBS:Je,activity:Z,openScore:ae},mouth:{open:at??ae>.5,openScore:ae,moving:$e??Z>.08,activity:Z}}}async function re(){try{S?.close?.()}catch{}}return{ready:!0,estimate:K,close:re}}function sn({monitoringStatus:n,sessionData:c,onStatusChange:a,onUpdateSession:m,onAddEvent:x,onAddSnapshot:_,gazeThresholds:E}){const[S,f]=t.useState({x:typeof window<"u"?window.innerWidth-280:0,y:typeof window<"u"?window.innerHeight-400:0}),[p,d]=t.useState(!1),[g,A]=t.useState({x:0,y:0}),[D,Z]=t.useState(0),[ce,fe]=t.useState(!1),[U,O]=t.useState(null),[Fe,Me]=t.useState(null),[_e,Oe]=t.useState(null),[Q,ye]=t.useState(0),[B,C]=t.useState(0),[I,Re]=t.useState([]),[K,re]=t.useState(0),[X,je]=t.useState(0),[Ue,qe]=t.useState(0),[Ke,Xe]=t.useState(0),[o,l]=t.useState(0),[s,z]=t.useState(!1),[L,ue]=t.useState(null),[Le,ke]=t.useState(null),[Ge,Be]=t.useState(!1),[Ve,gt]=t.useState(0),[ut,lt]=t.useState(null),[he,me]=t.useState(null),[tt,Ye]=t.useState(0),[Je,nt]=t.useState(0),[ft,rt]=t.useState(0),[dt,yt]=t.useState(null),[Ie,ot]=t.useState(0),[vt,wt]=t.useState(0),R=t.useRef(null),F=t.useRef(null),P=t.useRef(null),Ee=t.useRef(null),pe=t.useRef(null),ae=t.useRef(null),ee=t.useRef(null),ve=t.useRef(!1),ze=t.useRef(0),at=t.useRef(0),$e=t.useRef("none"),le=t.useRef({noFace:0,multipleFaces:0}),de=t.useRef({noFace:!1,multipleFaces:!1,gazeOff:!1}),Te=t.useRef(!1),we=t.useRef({offFrames:0,onFrames:0}),kt=E?.fallback?.offFrames??8,xt=E?.fallback?.onFrames??5,Et={yaw:E?.fallback?.yaw??32,pitch:E?.fallback?.pitch??26,centerOffset:E?.fallback?.centerOffset??.35},bt=t.useRef(null),ht=t.useRef([]),Ct=t.useRef(0),st=t.useRef(!1),V=t.useRef({yaw:0,pitch:0,roll:0,initialized:!1}),W=t.useRef({isGood:!0,goodStreak:0,poorStreak:0}),_t=8,mt=.25,{level:Ot,anomalyCount:jt,start:e,stop:r,setFaceDetected:i,setMouthState:w}=mn({context:"coding",onEvent:h=>x?.({...h,timestamp:Date.now()})});t.useEffect(()=>ye(Ot),[Ot]),t.useEffect(()=>C(jt),[jt]),t.useEffect(()=>{bt.current=pn({alpha:.5})},[]);const T=t.useCallback((h,v)=>{const b=v.data,J=v.width,q=v.height,j=Math.max(0,Math.floor(h.x-h.width*.2)),ne=Math.min(J,Math.floor(h.x+h.width*1.2)),Se=Math.min(q-1,Math.floor(h.y+h.height*1.05)),se=Math.min(q,Se+Math.floor(h.height*1.6));if(se<=Se||ne<=j)return{isProfessional:!1,hasShirt:!1,confidence:.4,details:"Insufficient torso ROI"};let H=0,G=0,Ze=0,ct=0,Mt=0;const Lt=Math.floor((j+ne)/2);for(let ie=Se;ie<se;ie++)for(let Pe=j;Pe<ne;Pe++){const Rt=(ie*J+Pe)*4,Ne=b[Rt],Ce=b[Rt+1],He=b[Rt+2],$=Math.max(Ne,Ce,He),We=Math.min(Ne,Ce,He),pt=$,Ft=$?($-We)/$:0;if(pt>60&&pt<210&&Ft<.45&&Ne>40&&Ce>20&&He>20&&Ne>He)continue;if((Ne+Ce+He)/3<105&&H++,(Math.abs(Ne-Ce)>28||Math.abs(Ce-He)>28)&&G++,Ze+=Ft,ct++,ie<Se+(se-Se)*.35&&Math.abs(Pe-Lt)<Math.max(6,Math.floor(h.width*.08))&&Pe>j+1&&Pe<ne-1){const It=(ie*J+(Pe-1))*4,Dt=(ie*J+(Pe+1))*4,Vt=(Ne+Ce+He)/3,Zt=(b[It]+b[It+1]+b[It+2])/3,Ht=(b[Dt]+b[Dt+1]+b[Dt+2])/3;(Math.abs(Vt-Zt)>28||Math.abs(Vt-Ht)>28)&&Mt++}}if(!ct)return{isProfessional:!1,hasShirt:!1,confidence:.4,details:"Insufficient torso pixels"};const At=H/ct,Ae=G/ct,y=Ze/ct,Y=Mt/ct,De=At>.18||y<.35,Qe=At>.35&&Ae<.22||y<.28&&Ae<.18||Y>.002,et=Math.max(.5,Math.min(.95,.55+(De?.15:0)+(Qe?.15:0)-Ae*.2));return{isProfessional:Qe,hasShirt:De,confidence:et,details:Qe?"Professional attire (solid/low-saturation)":De?"Casual attire":"Torso not clearly visible"}},[]),N=t.useCallback(h=>{if(!h.landmarks||h.landmarks.length<4)return null;const v=h.landmarks,b=v[0],J=v[1],q=v[2],j=v[3]??[(J[0]+b[0])/2,Math.max(J[1],b[1])+h.height*.2],ne=[(J[0]+b[0])/2,(J[1]+b[1])/2],Se=J[0]-b[0],se=J[1]-b[1],H=Math.max(1,Math.hypot(Se,se)),G=Math.atan2(se,Se)*180/Math.PI,Ze=Math.hypot(q[0]-b[0],q[1]-b[1]),ct=Math.hypot(q[0]-J[0],q[1]-J[1]),Mt=(Ze-ct)/H,Lt=Math.max(-45,Math.min(45,Mt*90)),At=Math.max(1,q[1]-ne[1]),Ae=Math.max(1,(j[1]??ne[1])-q[1]),y=(At-Ae)/h.height,Y=Math.max(-45,Math.min(45,y*180)),De=Math.abs(G)>20,Qe=Math.abs(Mt)>.18,et=Math.abs(Y)>15,ie=Qe||et||De,Pe=Math.max(.5,Math.min(1,Math.max(Math.abs(Mt)*2,Math.abs(G)/30,Math.abs(Y)/30)));return{yaw:Lt,pitch:Y,roll:G,isHeadTurned:ie,confidence:Pe}},[]),k=t.useCallback((h=.8)=>{const v=R.current,b=F.current;if(!v||!b)return null;const J=v.videoWidth||320,q=v.videoHeight||240;if(v.readyState<2)return null;b.width=J,b.height=q;const j=b.getContext("2d",{willReadFrequently:!0});if(!j)return null;j.drawImage(v,0,0,J,q);try{return b.toDataURL("image/jpeg",h)}catch{return null}},[]),M=t.useCallback(h=>{if(_){_(h);return}if(m){let b=[...c?.snapshots||[],h];b.length>50&&(b=b.slice(b.length-50)),m({snapshots:b})}},[_,m,c?.snapshots]),xe=t.useCallback(()=>{if(Ct.current>=5||st.current)return;st.current=!0;const h=k(.85);if(h){M({timestamp:Date.now(),type:"random_webcam",image:h,context:"Random webcam snapshot during coding"}),Ct.current+=1,st.current=!1;return}const v=window.setTimeout(()=>{const b=k(.85);b&&(M({timestamp:Date.now(),type:"random_webcam",image:b,context:"Random webcam snapshot (retry) during coding"}),Ct.current+=1),st.current=!1},3e3);ht.current.push(v)},[M,k]),te=t.useCallback(async()=>{try{const h=await Promise.resolve().then(()=>require("./index-x7BUnCGZ.cjs")),v=await Promise.resolve().then(()=>require("./blazeface.esm-BsJ4BrW4.cjs"));h.ready&&await h.ready();const b=await v.load();return Ee.current=b,!0}catch(h){return console.error("[widget] Failed to init face detection:",h),!1}},[]),oe=(h,v)=>{const b=Math.max(h.x,v.x),J=Math.max(h.y,v.y),q=Math.min(h.x+h.width,v.x+v.width),j=Math.min(h.y+h.height,v.y+v.height),ne=Math.max(0,q-b),Se=Math.max(0,j-J),se=ne*Se,H=h.width*h.height+v.width*v.height-se;return H>0?se/H:0},ge=t.useCallback(async()=>{if(Te.current){pe.current=requestAnimationFrame(ge);return}if(Te.current=!0,!R.current||!F.current||!Ee.current){pe.current=requestAnimationFrame(ge),Te.current=!1;return}const h=R.current,v=F.current;if(h.readyState!==4){pe.current=requestAnimationFrame(ge),Te.current=!1;return}try{const b=await Ee.current.estimateFaces(h,!1),J=h.videoWidth||h.width||v.width,q=h.videoHeight||h.height||v.height,j=.02,ne=.6,se=b.map(y=>{const[Y,De]=y.topLeft,[Qe,et]=y.bottomRight;return{x:Y,y:De,width:Qe-Y,height:et-De,confidence:y.probability?.[0]||.8,landmarks:y.landmarks}}).filter(y=>{if(y.width<=0||y.height<=0||(y.confidence||0)<.6)return!1;const Y=y.width*y.height,De=Y/(J*q);if(De<j||De>ne)return!1;const Qe=Math.max(0,y.x),et=Math.max(0,y.y),ie=Math.min(J,y.x+y.width),Pe=Math.min(q,y.y+y.height),Rt=Math.max(0,ie-Qe),Ne=Math.max(0,Pe-et);if(Rt*Ne/Math.max(1,Y)<.5)return!1;const He=y.width/y.height;return!(He<.5||He>2)});se.sort((y,Y)=>Y.confidence-y.confidence);const H=[];se.forEach(y=>{H.some(De=>oe(y,De)>.45)||H.push(y)}),Z(H.length),Re(H),fe(H.length===1),i(H.length>0);const G=Date.now(),Ze=H.length===0?"none":H.length===1?"single":"multiple";Ze==="multiple"?le.current.multipleFaces+=1:le.current.multipleFaces=Math.max(0,le.current.multipleFaces-1),Ze==="none"?le.current.noFace+=1:le.current.noFace=Math.max(0,le.current.noFace-1);const ct=3,Mt=2,Lt=3,At=2;let Ae=$e.current;if($e.current!=="multiple"?le.current.multipleFaces>=ct?Ae="multiple":Ae=Ze==="none"?"single":Ze:le.current.multipleFaces<=Mt&&(Ae=Ze==="multiple"?"multiple":"single"),Ae!=="none"?le.current.noFace>=Lt&&(Ae="none"):le.current.noFace<=At&&(Ae=Ze==="none"?"none":"single"),Ae==="multiple"){if($e.current!=="multiple"&&(lt(G),rt(y=>y+1),!de.current.multipleFaces)){de.current.multipleFaces=!0,x?.({eventType:"face_detection",severity:"warning",context:"coding",data:{reason:"multiple_faces",count:H.length},timestamp:G});const y=k(.85);y&&M({timestamp:G,type:"violation_trigger",image:y,context:"Multiple faces detected"})}}else{if($e.current==="multiple"&&ut!==null){const y=G-ut;Ye(Y=>Y+y),lt(null)}de.current.multipleFaces=!1}if(Ae==="none"){if($e.current!=="none"&&(yt(G),ot(y=>y+1),!de.current.noFace)){de.current.noFace=!0,x?.({eventType:"face_detection",severity:"critical",context:"coding",data:{reason:"no_face"},timestamp:G});const y=k(.85);y&&M({timestamp:G,type:"violation_trigger",image:y,context:"No face detected"})}}else{if($e.current==="none"&&dt!==null){const y=G-dt;wt(Y=>Y+y),yt(null)}de.current.noFace=!1}if($e.current=Ae,H.length===1){const y=H[0],Y=v.getContext("2d",{willReadFrequently:!0});if(Y){Y.drawImage(h,0,0,v.width,v.height);const De=Y.getImageData(0,0,v.width,v.height),Qe=Y.getImageData(y.x,y.y,y.width,y.height);let et={isGoodPosture:!0,shoulderAlignment:0,headTilt:0,confidence:.7};const ie=N(y);if(ie){V.current.initialized?(V.current.yaw=mt*ie.yaw+(1-mt)*V.current.yaw,V.current.pitch=mt*ie.pitch+(1-mt)*V.current.pitch,V.current.roll=mt*ie.roll+(1-mt)*V.current.roll):V.current={yaw:ie.yaw,pitch:ie.pitch,roll:ie.roll,initialized:!0};const $=V.current.yaw,We=V.current.pitch,pt=V.current.roll,Ft=Math.abs(pt)<=10&&Math.abs(We)<=12&&Math.abs($)<=18;Ft!==W.current.isGood?Ft?(W.current.goodStreak+=1,W.current.poorStreak=0,W.current.goodStreak>=_t&&(W.current.isGood=!0,W.current.goodStreak=0)):(W.current.poorStreak+=1,W.current.goodStreak=0,W.current.poorStreak>=_t&&(W.current.isGood=!1,W.current.poorStreak=0)):(W.current.goodStreak=0,W.current.poorStreak=0),et={isGoodPosture:W.current.isGood,shoulderAlignment:-pt,headTilt:We,confidence:Math.min(1,.6+.4*ie.confidence)}}let Pe=null;if(bt.current){const $=bt.current.analyze(Qe,{landmarks:y.landmarks,headPose:ie??null});Pe={dominant:$.dominant,confidence:$.confidence,emotions:$.emotions}}const Rt=T(y,De),Ne=ie??N(y);O(et),Me(Pe),Oe(Rt);let Ce=null;if(ee.current&&h)try{const $=await ee.current.estimate(h,performance?.now?.()||void 0);if(Ce=$?.onScreen??null,$?.mouth){ke($.mouth.open),Be($.mouth.moving);const We=Math.round(Math.min(1,Math.max(0,$.mouth.activity))*100);gt(We);try{w({open:$.mouth.open,moving:$.mouth.moving,activityPct:We})}catch{}}if(Ce!==null&&ue(Ce),Ce===!1&&!s&&Date.now()-at.current>3e3)l(We=>We+1),z(!0),me(G),at.current=Date.now(),ue(!1),de.current.gazeOff||(de.current.gazeOff=!0,x?.({eventType:"gaze_tracking",severity:"warning",context:"coding",data:{offscreen:!0,headPose:Ne,gaze:$},timestamp:G}));else if(Ce===!0&&s){if(he!==null){const We=G-he;nt(pt=>pt+We),me(null)}z(!1),de.current.gazeOff=!1,ue(!0)}}catch{Ce=null}if(Ce===null){const $=v.width,We=v.height,pt=y.x+y.width/2,Ft=y.y+y.height/2,Xt=Math.hypot((pt-$/2)/$,(Ft-We/2)/We),Jt=Ne?.yaw??0,It=Ne?.pitch??0,Dt=Math.abs(Jt)>Et.yaw||Math.abs(It)>Et.pitch,Vt=Xt>Et.centerOffset;Dt||Vt?(we.current.offFrames+=1,we.current.onFrames=Math.max(0,we.current.onFrames-1)):(we.current.onFrames+=1,we.current.offFrames=Math.max(0,we.current.offFrames-1));const Ht=we.current.offFrames>=kt,Qt=we.current.onFrames>=xt;if(ue(zt=>Qt?!0:Ht?!1:zt),Ht&&!s&&Date.now()-at.current>3e3)l(zt=>zt+1),z(!0),me(G),at.current=Date.now(),ue(!1),de.current.gazeOff||(de.current.gazeOff=!0,x?.({eventType:"gaze_tracking",severity:"warning",context:"coding",data:{offscreen:!0,reason:Dt?"head_pose":"center_offset",headPose:Ne},timestamp:G}));else if(Qt&&s){if(he!==null){const zt=G-he;nt(un=>un+zt),me(null)}z(!1),de.current.gazeOff=!1,ue(!0)}}const He=H.length===0||H.length>1;if(m&&(He||G-ze.current>=5e3)){if(He){const $=k(.85);$&&M({timestamp:G,type:"violation_trigger",image:$,context:H.length===0?"No face detected":"Multiple faces detected"})}m({postureAnalysis:et,attireAnalysis:Rt}),ze.current=G}}}else{if(O(null),Me(null),Oe(null),s){if(he!==null){const y=G-he;nt(Y=>Y+y),me(null)}z(!1)}ue(null)}H.length===0?a?.("violation"):H.length>1?a?.("warning"):a?.("optimal")}catch(b){console.error("[widget] Face detection error:",b)}finally{pe.current=requestAnimationFrame(ge),Te.current=!1}},[T,a,m,c?.snapshots,s,ut,he,i]);t.useEffect(()=>{C(0)},[]),t.useEffect(()=>{(async()=>{try{const j=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15}},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});R.current&&(R.current.srcObject=j,R.current.onloadedmetadata=async()=>{try{await R.current.play?.()}catch{}try{const se=R.current;se?.videoWidth&&se?.videoHeight&&(se.width=se.videoWidth,se.height=se.videoHeight)}catch{}});let ne=null;const Se=j.getAudioTracks();Se.length>0&&(ne=new MediaStream(Se),ae.current=ne),await te();try{ee.current=await yn({thresholds:E?.mediapipe})}catch{}ne&&await e(ne),pe.current=requestAnimationFrame(ge)}catch{a?.("violation")}})();const v=5,b=[60*1e3,5*60*1e3],J=Math.max(0,v-b.length),q=[...b];if(J>0)for(let Se=0;Se<J;Se++){const se=42e4+Math.random()*18e4,H=(Math.random()-.5)*30*1e3;q.push(Math.max(0,Math.floor(se+H)))}q.sort((j,ne)=>j-ne);for(let j=1;j<q.length;j++)Math.abs(q[j]-q[j-1])<10*1e3&&(q[j]+=12*1e3);return q.forEach(j=>{const ne=window.setTimeout(()=>xe(),j);ht.current.push(ne)}),()=>{ve.current=!0,pe.current&&cancelAnimationFrame(pe.current),R.current?.srcObject&&R.current.srcObject.getTracks().forEach(ne=>ne.stop()),ae.current&&ae.current.getTracks().forEach(j=>j.stop()),r(),ae.current=null,ee.current?.close?.(),ht.current.forEach(j=>window.clearTimeout(j)),ht.current=[]}},[]);const St=h=>{d(!0);const v=P.current?.getBoundingClientRect();v&&A({x:h.clientX-v.left,y:h.clientY-v.top})},it=h=>{if(p){const v=Math.max(0,Math.min((typeof window<"u"?window.innerWidth:0)-280,h.clientX-g.x)),b=Math.max(0,Math.min((typeof window<"u"?window.innerHeight:0)-400,h.clientY-g.y));f({x:v,y:b})}},be=()=>d(!1);t.useEffect(()=>{if(p)return document.addEventListener("mousemove",it),document.addEventListener("mouseup",be),()=>{document.removeEventListener("mousemove",it),document.removeEventListener("mouseup",be)}},[p,g]);const Tt=()=>{document.hidden&&je(h=>{const v=h+1;return x?.({eventType:"tab_switch",severity:"critical",context:"coding",data:{when:Date.now()},timestamp:Date.now()}),v})},Ut=()=>re(h=>h+1),Bt=h=>{qe(v=>v+1),x?.({eventType:"keystroke",severity:"info",context:"coding",data:{},timestamp:Date.now()}),(h.ctrlKey||h.metaKey)&&(h.key==="c"||h.key==="x"||h.key==="v")&&(Xe(v=>v+1),h.preventDefault(),x?.({eventType:"keystroke",severity:"warning",context:"coding",data:{copyCutPaste:!0,key:h.key},timestamp:Date.now()}))};t.useEffect(()=>(document.addEventListener("visibilitychange",Tt),window.addEventListener("blur",Ut),document.addEventListener("keydown",Bt),()=>{document.removeEventListener("visibilitychange",Tt),window.removeEventListener("blur",Ut),document.removeEventListener("keydown",Bt)}),[]);const cn=D===0?"#ef4444":D>1?"#f59e0b":"#22c55e";return u.jsxs("div",{ref:P,onMouseDown:St,style:{position:"fixed",left:S.x,top:S.y,zIndex:9999,width:288,cursor:"move",border:`2px solid ${cn}`,borderRadius:8,background:"#fff",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",padding:12,userSelect:"none"},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:u.jsx("div",{style:{fontSize:12,fontWeight:600},children:D===0?"No Face":D>1?"Multiple Faces":ce?"Optimal":"Good"})}),u.jsxs("div",{style:{position:"relative",background:"#000",borderRadius:4,overflow:"hidden"},children:[u.jsx("video",{ref:R,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:128,objectFit:"cover"}}),u.jsx("canvas",{ref:F,width:320,height:240,style:{display:"none"}})]}),u.jsxs("div",{style:{marginTop:8,fontSize:12,display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[u.jsxs("div",{children:["Faces: ",u.jsx("strong",{style:{color:D===1?"#16a34a":"#ef4444"},children:D})]}),u.jsxs("div",{children:["No Face: ",u.jsx("strong",{style:{color:Ie>0?"#ef4444":"#16a34a"},children:Ie})]}),u.jsxs("div",{children:["Multiple: ",u.jsx("strong",{style:{color:ft>0?"#ef4444":"#16a34a"},children:ft})]}),u.jsxs("div",{children:["Posture: ",u.jsx("strong",{style:{color:U?.isGoodPosture?"#16a34a":"#f59e0b"},children:U?.isGoodPosture?"Good":"Poor"})]}),u.jsxs("div",{children:["Attire: ",u.jsx("strong",{style:{color:_e?.isProfessional?"#16a34a":"#f59e0b"},children:_e?.isProfessional?"Professional":"Casual"})]}),u.jsxs("div",{children:["Emotion: ",u.jsx("strong",{style:{color:"#3b82f6"},children:Fe?.dominant||"Unknown"})]}),u.jsxs("div",{children:["Gaze: ",u.jsx("strong",{style:{color:L===null?"#9ca3af":L?"#16a34a":"#ef4444"},children:L===null?"--":L?"On":"Off"})]}),u.jsxs("div",{children:["Mouth: ",u.jsx("strong",{style:{color:Le===null?"#9ca3af":Le?"#16a34a":"#111827"},children:Le===null?"--":Le?Ge?"Open+Moving":"Open":Ge?"Closed+Moving":"Closed"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Lip Act: ",u.jsxs("span",{style:{color:Ve>30?"#16a34a":Ve>10?"#f59e0b":"#9ca3af"},children:[Ve,"%"]}),u.jsx("div",{style:{width:64,height:6,background:"#eee",borderRadius:9999,overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(Ve,100)}%`,height:6,transition:"width 100ms",background:Ve>30?"#16a34a":Ve>10?"#f59e0b":"#9ca3af"}})})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Audio: ",u.jsxs("span",{style:{color:Q>50?"#16a34a":Q>20?"#f59e0b":"#ef4444"},children:[Q,"%"]}),u.jsx("div",{style:{width:64,height:6,background:"#eee",borderRadius:9999,overflow:"hidden"},children:u.jsx("div",{style:{width:`${Math.min(Q,100)}%`,height:6,transition:"width 100ms",background:Q>50?"#16a34a":Q>20?"#f59e0b":"#ef4444"}})})]}),u.jsxs("div",{children:["Audio Alerts: ",u.jsx("strong",{style:{color:B>0?"#ef4444":"#16a34a"},children:B})]}),u.jsxs("div",{children:["Unfocus: ",u.jsx("strong",{style:{color:K>0?"#ef4444":"#16a34a"},children:K})]}),u.jsxs("div",{children:["Tab Switch: ",u.jsx("strong",{style:{color:X>0?"#ef4444":"#16a34a"},children:X})]}),u.jsxs("div",{children:["Keystrokes: ",u.jsx("strong",{style:{color:"#3b82f6"},children:Ue})]}),u.jsxs("div",{children:["Copy Attempts: ",u.jsx("strong",{style:{color:Ke>0?"#ef4444":"#16a34a"},children:Ke})]}),u.jsxs("div",{children:["Gaze Off: ",u.jsx("strong",{style:{color:o>0?"#ef4444":"#16a34a"},children:o})]})]})]})}const $t=(n,c)=>n.length>c?n.slice(n.length-c):n,vn=(n,c)=>({sessionId:n,sessionType:"coding-assessment",startTime:Date.now(),preCheckResults:c,liveEvents:[],codingMetrics:{totalKeystrokes:0,linesOfCode:0,codeExecutions:0,externalCopyEvents:0,languageSwitches:0,averageTypingSpeed:0,codingTimeVsReadingTime:{coding:0,reading:0}},questionProgress:[],snapshots:[],sessionStats:{totalDuration:0,questionsAttempted:0,violationCount:0,tabSwitches:0,audioAnomalies:0,gazeDuration:0,focusBreaks:0,codeExecutionCount:0,noFaceIncidents:0,multipleFaceIncidents:0,unfocusEvents:0,gazeOffScreenIncidents:0,keystrokes:0,copyCutPasteAttempts:0}});function wn(n,c){switch(c.eventType){case"tab_switch":return{...n,tabSwitches:n.tabSwitches+1,violationCount:n.violationCount+1};case"audio_anomaly":return{...n,audioAnomalies:n.audioAnomalies+1,violationCount:n.violationCount+1};case"code_execution":return{...n,codeExecutionCount:n.codeExecutionCount+1};case"face_detection":{const a=c.data?.reason;return a==="no_face"?{...n,noFaceIncidents:n.noFaceIncidents+1,violationCount:n.violationCount+1}:a==="multiple_faces"?{...n,multipleFaceIncidents:n.multipleFaceIncidents+1,violationCount:n.violationCount+1}:n}case"gaze_tracking":{const a=c.data?.type==="focus_break",m=Number(c.data?.focusTimeMs)||0,x=c.data?.offscreen===!0;return{...n,focusBreaks:n.focusBreaks+(a?1:0),gazeDuration:n.gazeDuration+m,unfocusEvents:n.unfocusEvents+(a?1:0),gazeOffScreenIncidents:n.gazeOffScreenIncidents+(x?1:0),violationCount:n.violationCount+(a||x?1:0)}}case"keystroke":{const a=c.data?.copyCutPaste===!0;return{...n,keystrokes:n.keystrokes+1,copyCutPasteAttempts:n.copyCutPasteAttempts+(a?1:0),violationCount:n.violationCount+(a?1:0)}}default:return n}}function xn(n,c){switch(c.type){case"INIT":return{...c.payload};case"SET_FIELDS":{const a={...n,...c.payload};return a.snapshots&&(a.snapshots=$t(a.snapshots,50)),a.liveEvents&&(a.liveEvents=$t(a.liveEvents,200)),a}case"ADD_EVENTS":{const a=$t([...n.liveEvents,...c.events],200),m=c.events.reduce(wn,n.sessionStats);return{...n,liveEvents:a,sessionStats:m}}case"ADD_SNAPSHOT":{const a=$t([...n.snapshots,c.snapshot],50);return{...n,snapshots:a}}case"TICK":{const a=Math.max(0,c.now-n.startTime);return a===n.sessionStats.totalDuration?n:{...n,sessionStats:{...n.sessionStats,totalDuration:a}}}case"COMPLETE":{const a=c.endTime??Date.now();return{...n,sessionStats:{...n.sessionStats,totalDuration:Math.max(0,a-n.startTime)}}}default:return n}}function bn(n){const[c,a]=t.useState(null),m=t.useCallback(d=>{a(g=>g&&xn(g,d))},[]),x=t.useRef(null),_=t.useRef(0),E=t.useRef(null),S=t.useCallback(d=>{const g=`session_${Date.now()}_${Math.random().toString(36).slice(2,9)}`;x.current=g;const A=sessionStorage.getItem(g);if(A)try{const Z=JSON.parse(A);return a(Z),g}catch{}const D=vn(g,d);return a(D),sessionStorage.setItem(g,JSON.stringify(D)),g},[n?.sessionId]),f=t.useCallback(d=>{const g=d??c;if(!(!g||!x.current))try{sessionStorage.setItem(x.current,JSON.stringify(g)),_.current=Date.now()}catch(A){console.error("[session] persist failed",A)}},[c]);return t.useEffect(()=>{if(!c)return;const g=Date.now()-_.current;return g<1e3?(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>f(),1e3-g)):f(),()=>{E.current&&clearTimeout(E.current)}},[c,f]),t.useEffect(()=>{const d=()=>f();return window.addEventListener("visibilitychange",d),window.addEventListener("beforeunload",d),()=>{window.removeEventListener("visibilitychange",d),window.removeEventListener("beforeunload",d)}},[f]),t.useEffect(()=>{if(!c)return;const d=setInterval(()=>m({type:"TICK",now:Date.now()}),1e3);return()=>clearInterval(d)},[c,m]),t.useMemo(()=>({state:c,sessionId:x.current,init:S,setFields:d=>m({type:"SET_FIELDS",payload:d}),addEvents:d=>m({type:"ADD_EVENTS",events:d}),addSnapshot:d=>m({type:"ADD_SNAPSHOT",snapshot:d}),complete:()=>m({type:"COMPLETE"})}),[c,m,S])}function Sn({onSessionStart:n,onSessionUpdate:c,onEvent:a}){const[m,x]=t.useState(null),[_,E]=t.useState("optimal"),S=bn();return t.useEffect(()=>{if(m&&!S.state){const f=S.init(m);n?.(f,m)}},[m,S]),m?u.jsx(sn,{monitoringStatus:_,sessionData:S.state??void 0,onStatusChange:f=>E(f),onUpdateSession:f=>{S.setFields(f),c?.(f)},onAddSnapshot:f=>S.addSnapshot(f),onAddEvent:f=>{S.addEvents([{...f,timestamp:f.timestamp??Date.now()}]),a?.(f)},gazeThresholds:{mediapipe:{horiz:.35,vert:.5,yaw:20,pitch:18,offDwell:5,onDwell:3,calibFrames:24},fallback:{yaw:24,pitch:20,centerOffset:.22,offFrames:5,onFrames:3}}}):u.jsx(an,{onComplete:f=>x(f),onError:()=>x(null)})}exports.FloatingVideo=sn;exports.Prechecks=an;exports.ProctoringWidget=Sn;
