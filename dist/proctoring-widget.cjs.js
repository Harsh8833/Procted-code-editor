"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react");var Xt={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var en;function ln(){if(en)return It;en=1;var t=n,i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function M(x,d,h){var c,g={},D=null,P=null;h!==void 0&&(D=""+h),d.key!==void 0&&(D=""+d.key),d.ref!==void 0&&(P=d.ref);for(c in d)p.call(d,c)&&!E.hasOwnProperty(c)&&(g[c]=d[c]);if(x&&x.defaultProps)for(c in d=x.defaultProps,d)g[c]===void 0&&(g[c]=d[c]);return{$$typeof:i,type:x,key:D,ref:P,props:g,_owner:y.current}}return It.Fragment=a,It.jsx=M,It.jsxs=M,It}var zt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tn;function fn(){return tn||(tn=1,process.env.NODE_ENV!=="production"&&function(){var t=n,i=Symbol.for("react.element"),a=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),x=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),X=Symbol.iterator,ie="@@iterator";function le(e){if(e===null||typeof e!="object")return null;var r=X&&e[X]||e[ie];return typeof r=="function"?r:null}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function T(e){{for(var r=arguments.length,u=new Array(r>1?r-1:0),w=1;w<r;w++)u[w-1]=arguments[w];Ce("error",e,u)}}function Ce(e,r,u){{var w=B.ReactDebugCurrentFrame,A=w.getStackAddendum();A!==""&&(r+="%s",u=u.concat([A]));var U=u.map(function(F){return String(F)});U.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,U)}}var we=!1,Fe=!1,_e=!1,J=!1,ye=!1,V;V=Symbol.for("react.module.reference");function C(e){return!!(typeof e=="string"||typeof e=="function"||e===p||e===E||ye||e===y||e===h||e===c||J||e===P||we||Fe||_e||typeof e=="object"&&e!==null&&(e.$$typeof===D||e.$$typeof===g||e.$$typeof===M||e.$$typeof===x||e.$$typeof===d||e.$$typeof===V||e.getModuleId!==void 0))}function N(e,r,u){var w=e.displayName;if(w)return w;var A=r.displayName||r.name||"";return A!==""?u+"("+A+")":u}function xe(e){return e.displayName||"Context"}function G(e){if(e==null)return null;if(typeof e.tag=="number"&&T("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case a:return"Portal";case E:return"Profiler";case y:return"StrictMode";case h:return"Suspense";case c:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case x:var r=e;return xe(r)+".Consumer";case M:var u=e;return xe(u._context)+".Provider";case d:return N(e,e.render,"ForwardRef");case g:var w=e.displayName||null;return w!==null?w:G(e.type)||"Memo";case D:{var A=e,U=A._payload,F=A._init;try{return G(F(U))}catch{return null}}}return null}var te=Object.assign,H=0,De,We,Ge,$e,Ke,o,f;function s(){}s.__reactDisabledLog=!0;function W(){{if(H===0){De=console.log,We=console.info,Ge=console.warn,$e=console.error,Ke=console.group,o=console.groupCollapsed,f=console.groupEnd;var e={configurable:!0,enumerable:!0,value:s,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}H++}}function I(){{if(H--,H===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},e,{value:De}),info:te({},e,{value:We}),warn:te({},e,{value:Ge}),error:te({},e,{value:$e}),group:te({},e,{value:Ke}),groupCollapsed:te({},e,{value:o}),groupEnd:te({},e,{value:f})})}H<0&&T("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ce=B.ReactCurrentDispatcher,Pe;function be(e,r,u){{if(Pe===void 0)try{throw Error()}catch(A){var w=A.stack.trim().match(/\n( *(at )?)/);Pe=w&&w[1]||""}return`
`+Pe+e}}var He=!1,Ue;{var Be=typeof WeakMap=="function"?WeakMap:Map;Ue=new Be}function pt(e,r){if(!e||He)return"";{var u=Ue.get(e);if(u!==void 0)return u}var w;He=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var U;U=ce.current,ce.current=null,W();try{if(r){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(Re){w=Re}Reflect.construct(e,[],F)}else{try{F.call()}catch(Re){w=Re}e.call(F.prototype)}}else{try{throw Error()}catch(Re){w=Re}e()}}catch(Re){if(Re&&w&&typeof Re.stack=="string"){for(var k=Re.stack.split(`
`),ne=w.stack.split(`
`),q=k.length-1,re=ne.length-1;q>=1&&re>=0&&k[q]!==ne[re];)re--;for(;q>=1&&re>=0;q--,re--)if(k[q]!==ne[re]){if(q!==1||re!==1)do if(q--,re--,re<0||k[q]!==ne[re]){var Ne=`
`+k[q].replace(" at new "," at ");return e.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",e.displayName)),typeof e=="function"&&Ue.set(e,Ne),Ne}while(q>=1&&re>=0);break}}}finally{He=!1,ce.current=U,I(),Error.prepareStackTrace=A}var xt=e?e.displayName||e.name:"",Ve=xt?be(xt):"";return typeof e=="function"&&Ue.set(e,Ve),Ve}function ut(e,r,u){return pt(e,!1)}function lt(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function de(e,r,u){if(e==null)return"";if(typeof e=="function")return pt(e,lt(e));if(typeof e=="string")return be(e);switch(e){case h:return be("Suspense");case c:return be("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case d:return ut(e.render);case g:return de(e.type,r,u);case D:{var w=e,A=w._payload,U=w._init;try{return de(U(A),r,u)}catch{}}}return""}var he=Object.prototype.hasOwnProperty,nt={},Ye=B.ReactDebugCurrentFrame;function Xe(e){if(e){var r=e._owner,u=de(e.type,e._source,r?r.type:null);Ye.setExtraStackFrame(u)}else Ye.setExtraStackFrame(null)}function rt(e,r,u,w,A){{var U=Function.call.bind(he);for(var F in e)if(U(e,F)){var k=void 0;try{if(typeof e[F]!="function"){var ne=Error((w||"React class")+": "+u+" type `"+F+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[F]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ne.name="Invariant Violation",ne}k=e[F](r,F,w,u,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(q){k=q}k&&!(k instanceof Error)&&(Xe(A),T("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",w||"React class",u,F,typeof k),Xe(null)),k instanceof Error&&!(k.message in nt)&&(nt[k.message]=!0,Xe(A),T("Failed %s type: %s",u,k.message),Xe(null))}}}var ft=Array.isArray;function ot(e){return ft(e)}function dt(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,u=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return u}}function gt(e){try{return je(e),!1}catch{return!0}}function je(e){return""+e}function at(e){if(gt(e))return T("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",dt(e)),je(e)}var yt=B.ReactCurrentOwner,vt={key:!0,ref:!0,__self:!0,__source:!0},R,O;function j(e){if(he.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function Se(e){if(he.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function me(e,r){typeof e.ref=="string"&&yt.current}function ae(e,r){{var u=function(){R||(R=!0,T("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};u.isReactWarning=!0,Object.defineProperty(e,"key",{get:u,configurable:!0})}}function Z(e,r){{var u=function(){O||(O=!0,T("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};u.isReactWarning=!0,Object.defineProperty(e,"ref",{get:u,configurable:!0})}}var pe=function(e,r,u,w,A,U,F){var k={$$typeof:i,type:e,key:r,ref:u,props:F,_owner:U};return k._store={},Object.defineProperty(k._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(k,"_self",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.defineProperty(k,"_source",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.freeze&&(Object.freeze(k.props),Object.freeze(k)),k};function Le(e,r,u,w,A){{var U,F={},k=null,ne=null;u!==void 0&&(at(u),k=""+u),Se(r)&&(at(r.key),k=""+r.key),j(r)&&(ne=r.ref,me(r,A));for(U in r)he.call(r,U)&&!vt.hasOwnProperty(U)&&(F[U]=r[U]);if(e&&e.defaultProps){var q=e.defaultProps;for(U in q)F[U]===void 0&&(F[U]=q[U])}if(k||ne){var re=typeof e=="function"?e.displayName||e.name||"Unknown":e;k&&ae(F,re),ne&&Z(F,re)}return pe(e,k,ne,A,w,yt.current,F)}}var Mt=B.ReactCurrentOwner,kt=B.ReactDebugCurrentFrame;function Ie(e){if(e){var r=e._owner,u=de(e.type,e._source,r?r.type:null);kt.setExtraStackFrame(u)}else kt.setExtraStackFrame(null)}var ze;ze=!1;function ue(e){return typeof e=="object"&&e!==null&&e.$$typeof===i}function se(){{if(Mt.current){var e=G(Mt.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function Je(e){return""}var Oe={};function Pt(e){{var r=se();if(!r){var u=typeof e=="string"?e:e.displayName||e.name;u&&(r=`

Check the top-level render call using <`+u+">.")}return r}}function Ft(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var u=Pt(r);if(Oe[u])return;Oe[u]=!0;var w="";e&&e._owner&&e._owner!==Mt.current&&(w=" It was passed a child from "+G(e._owner.type)+"."),Ie(e),T('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',u,w),Ie(null)}}function wt(e,r){{if(typeof e!="object")return;if(ot(e))for(var u=0;u<e.length;u++){var w=e[u];ue(w)&&Ft(w,r)}else if(ue(e))e._store&&(e._store.validated=!0);else if(e){var A=le(e);if(typeof A=="function"&&A!==e.entries)for(var U=A.call(e),F;!(F=U.next()).done;)ue(F.value)&&Ft(F.value,r)}}}function Et(e){{var r=e.type;if(r==null||typeof r=="string")return;var u;if(typeof r=="function")u=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===d||r.$$typeof===g))u=r.propTypes;else return;if(u){var w=G(r);rt(u,e.props,"prop",w,e)}else if(r.PropTypes!==void 0&&!ze){ze=!0;var A=G(r);T("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",A||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&T("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function st(e){{for(var r=Object.keys(e.props),u=0;u<r.length;u++){var w=r[u];if(w!=="children"&&w!=="key"){Ie(e),T("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",w),Ie(null);break}}e.ref!==null&&(Ie(e),T("Invalid attribute `ref` supplied to `React.Fragment`."),Ie(null))}}var ge={};function fe(e,r,u,w,A,U){{var F=C(e);if(!F){var k="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(k+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ne=Je();ne?k+=ne:k+=se();var q;e===null?q="null":ot(e)?q="array":e!==void 0&&e.$$typeof===i?(q="<"+(G(e.type)||"Unknown")+" />",k=" Did you accidentally export a JSX literal instead of a component?"):q=typeof e,T("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",q,k)}var re=Le(e,r,u,A,U);if(re==null)return re;if(F){var Ne=r.children;if(Ne!==void 0)if(w)if(ot(Ne)){for(var xt=0;xt<Ne.length;xt++)wt(Ne[xt],e);Object.freeze&&Object.freeze(Ne)}else T("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else wt(Ne,e)}if(he.call(r,"key")){var Ve=G(e),Re=Object.keys(r).filter(function(Wt){return Wt!=="key"}),Ot=Re.length>0?"{key: someKey, "+Re.join(": ..., ")+": ...}":"{key: someKey}";if(!ge[Ve+Ot]){var Nt=Re.length>0?"{"+Re.join(": ..., ")+": ...}":"{}";T(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ot,Ve,Nt,Ve),ge[Ve+Ot]=!0}}return e===p?st(re):Et(re),re}}function Te(e,r,u){return fe(e,r,u,!0)}function ve(e,r,u){return fe(e,r,u,!1)}var _t=ve,ht=Te;zt.Fragment=p,zt.jsx=_t,zt.jsxs=ht}()),zt}process.env.NODE_ENV==="production"?Xt.exports=ln():Xt.exports=fn();var l=Xt.exports;function on(t){const i=window.AudioContext||window.webkitAudioContext,a=new i,p=a.createMediaStreamSource(t),y=a.createAnalyser();y.fftSize=2048,y.smoothingTimeConstant=.85,p.connect(y);const E=new Uint8Array(y.fftSize);function M(){y.getByteTimeDomainData(E);let x=0;for(let d=0;d<E.length;d++){const h=(E[d]-128)/128;x+=h*h}return Math.sqrt(x/E.length)}return{getLevel:()=>M(),dispose:async()=>{try{p.disconnect()}catch{}try{y.disconnect()}catch{}try{await a.close()}catch{}}}}let Gt=null;async function dn(){if(Gt)return Gt;const t=await Promise.resolve().then(()=>require("./blazeface.esm-BsJ4BrW4.cjs")),i=await Promise.resolve().then(()=>require("./index-x7BUnCGZ.cjs"));return i.ready&&await i.ready(),Gt=await t.load(),Gt}function nn(t,i,a){if(t.width<=0||t.height<=0||i<=0||a<=0)return!1;const p=Math.max(12,Math.floor(i*.08)),y=Math.max(12,Math.floor(a*.08));if(t.x<p||t.y<y||t.x+t.width>i-p||t.y+t.height>a-y)return!1;const E=t.width*t.height,M=i*a,x=E/M;if(x<.08||x>.55)return!1;const d=t.width/i,h=t.height/a;if(d<.18||h<.18)return!1;const c=t.width/t.height;return!(c<.7||c>1.5)}async function hn(t){if("FaceDetector"in window)try{const a=await new window.FaceDetector({fastMode:!0,maxDetectedFaces:1}).detect(t);if(a&&a.length>0){const p=a[0]?.boundingBox,y=t.videoWidth||t.width||0,E=t.videoHeight||t.height||0;if(p){const M={x:p.x,y:p.y,width:p.width,height:p.height};if(nn(M,y,E))return{present:!0,confidence:.85}}}return{present:!1,confidence:0}}catch{}try{const a=await(await dn()).estimateFaces(t,!1);if(a&&a.length>0){const p=t.videoWidth||t.width||0,y=t.videoHeight||t.height||0;for(const E of a){const[M,x]=E.topLeft,[d,h]=E.bottomRight,c={x:M,y:x,width:d-M,height:h-x};if(nn(c,p,y)){const g=E.probability?E.probability[0]:.75;return{present:!0,confidence:Math.max(.6,Math.min(1,g))}}}}}catch{}return{present:!1,confidence:0}}function an({onComplete:t,onError:i}){const a=["camera","microphone","face","monitor","browser"],[p,y]=n.useState({camera:"pending",microphone:"pending",face:"pending",monitor:"pending",browser:"pending"}),[E,M]=n.useState(0),[x,d]=n.useState(0),[h,c]=n.useState({}),[g,D]=n.useState({}),P=n.useRef(null),X=n.useRef(null),ie=n.useRef(null),le=n.useRef(null),B=n.useRef(null),T=()=>{try{P.current?.getTracks().forEach(o=>o.stop())}catch{}try{X.current?.getTracks().forEach(o=>o.stop())}catch{}P.current=null,X.current=null,ie.current&&(ie.current.dispose().catch(()=>{}),ie.current=null),le.current&&(cancelAnimationFrame(le.current),le.current=null)},Ce=async o=>{try{const f=window.AudioContext||window.webkitAudioContext;if(!f)throw new Error("AudioContext not supported");const s=new f,W=s.createMediaStreamSource(o),I=s.createAnalyser();I.fftSize=256,I.smoothingTimeConstant=.8,W.connect(I);const ce=new Uint8Array(I.frequencyBinCount);I.getByteFrequencyData(ce),sessionStorage.setItem("audio-context-initialized","true"),W.disconnect(),await s.close(),typeof window<"u"&&(window.precheckAudioStream=o)}catch{sessionStorage.setItem("audio-context-initialized","false")}},we=async o=>{const f=B.current;let s=0,W=0,I=0;const ce=30;for(;I<ce&&s<5;){try{const be=await hn(f);be.present&&(s+=1,W=Math.max(W,be.confidence))}catch{}I++,M(I),await new Promise(be=>setTimeout(be,100))}return{status:s>=5,confidence:W,timestamp:Date.now()}};function Fe(){return"isExtended"in window.screen?window.screen.isExtended:window.screen.availWidth>window.screen.width||window.screenLeft!==0||window.screenTop!==0||window.matchMedia("(display-mode: extended)").matches}const _e=()=>{try{const o=window.screen.width,f=window.screen.height,s=window.screen.availWidth;return o/f>3||o>s*1.5||[3840,3360,2560,4480,5120].includes(o)?2:1}catch{return 1}},J=async()=>_e(),ye=()=>["navigator.mediaDevices","navigator.mediaDevices.getUserMedia","requestAnimationFrame","WebAssembly"].every(f=>{const s=f.split(".");let W=window;for(const I of s){if(!(I in W))return!1;W=W[I]}return!0}),V=(o,f)=>{y(s=>({...s,[o]:f}))},C=n.useCallback(async()=>{V("camera","running"),c(o=>({...o,camera:""}));try{try{P.current?.getTracks().forEach(f=>f.stop())}catch{}const o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15}}});if(P.current=o,!B.current){const f=document.createElement("video");f.muted=!0,f.playsInline=!0,B.current=f}B.current.srcObject=o;try{await B.current.play()}catch{}return D(f=>({...f,cameraAccess:!0})),V("camera","passed"),!0}catch(o){const f=o?.name==="NotAllowedError"?"Camera permission denied":o?.message||"Camera access failed";return c(s=>({...s,camera:f})),V("camera","failed"),!1}},[]),N=n.useCallback(async()=>{V("microphone","running"),c(o=>({...o,microphone:""}));try{try{X.current?.getTracks().forEach(f=>f.stop())}catch{}const o=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});X.current=o,D(f=>({...f,microphoneAccess:!0})),await Ce(o);try{const f=on(o);ie.current=f;const s=()=>{d(f.getLevel()),le.current=requestAnimationFrame(s)};le.current=requestAnimationFrame(s)}catch{}return V("microphone","passed"),!0}catch(o){const f=o?.name==="NotAllowedError"?"Microphone permission denied":o?.message||"Microphone access failed";return c(s=>({...s,microphone:f})),V("microphone","failed"),!1}},[]),xe=n.useCallback(async()=>{V("face","running"),c(o=>({...o,face:""}));try{if(!P.current)throw new Error("Camera is not initialized");const o=await we(P.current);if(D(f=>({...f,faceDetection:o})),o.status)return V("face","passed"),!0;throw new Error("No face detected. Please ensure your full face is entirely within the camera frame and retry.")}catch(o){const f=o?.message||"Face detection failed";return c(s=>({...s,face:f})),V("face","failed"),!1}},[]),G=n.useCallback(async()=>{V("monitor","running"),c(o=>({...o,monitor:""}));try{const o=await J();if(o&&o>1||Fe())throw D(f=>({...f,monitorCount:o})),new Error("Multiple displays detected. Please remove external screens and keep only one display connected, then press Retry.");if(o===1)return D(f=>({...f,monitorCount:o})),V("monitor","passed"),!0;throw new Error("Could not verify displays")}catch(o){return c(f=>({...f,monitor:o?.message||"Monitor verification failed"})),V("monitor","failed"),!1}},[]),te=n.useCallback(async()=>{V("browser","running"),c(o=>({...o,browser:""}));try{const o=ye();if(D(f=>({...f,browserSupport:o})),!o)throw new Error("Required browser features are unavailable");return V("browser","passed"),!0}catch(o){return c(f=>({...f,browser:o?.message||"Browser not supported"})),V("browser","failed"),!1}},[]),H={camera:C,microphone:N,face:xe,monitor:G,browser:te},De=n.useCallback(async o=>{for(let f=o;f<a.length;f++){const s=a[f];if(!await H[s]())break}},[H]);n.useEffect(()=>{if(!a.every(s=>p[s]==="passed"))return;const f={cameraAccess:!!g.cameraAccess,microphoneAccess:!!g.microphoneAccess,faceDetection:g.faceDetection||{status:!1,confidence:0,timestamp:Date.now()},monitorCount:g.monitorCount||1,browserSupport:!!g.browserSupport,codeEditorReady:!0};t(f),T()},[p,g]),n.useEffect(()=>(De(0),()=>T()),[]);const We=o=>{const f=a.indexOf(o);y(s=>{const W={...s};for(let I=f;I<a.length;I++)W[a[I]]="pending";return W}),c(s=>({...s,[o]:""})),De(f)},Ge=a.filter(o=>p[o]==="passed").length,$e=a.some(o=>p[o]==="running"),Ke=Math.round((Ge+($e?.5:0))/a.length*100);return l.jsx("div",{style:{fontFamily:"system-ui, sans-serif",minHeight:"100vh",display:"grid",placeItems:"center",background:"linear-gradient(135deg,#eff6ff,#eef2ff)"},children:l.jsxs("div",{style:{width:720,maxWidth:"95vw",background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:16,boxShadow:"0 8px 24px rgba(0,0,0,0.08)"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[l.jsx("h2",{style:{margin:0,fontSize:20,fontWeight:700},children:"System Pre-Check"}),l.jsx("p",{style:{color:"#6b7280"},children:"Verifying your system for proctored assessment"})]}),l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12},children:[l.jsx("span",{children:"Overall Progress"}),l.jsxs("span",{children:[Ke,"%"]})]}),l.jsx("div",{style:{height:8,background:"#f3f4f6",borderRadius:9999,overflow:"hidden"},children:l.jsx("div",{style:{width:`${Ke}%`,height:8,background:"#3b82f6"}})})]}),l.jsx("div",{style:{display:"grid",gap:8},children:a.map(o=>{const f=o==="camera"?"Camera Access":o==="microphone"?"Microphone Access":o==="face"?"Face Detection":o==="monitor"?"Single Monitor Check":"Browser Support",s=p[o],W=s==="passed"?"#ecfdf5":s==="running"?"#eff6ff":s==="failed"?"#fef2f2":"#f9fafb",I=s==="passed"?"#10b981":s==="running"?"#3b82f6":s==="failed"?"#dc2626":"#9ca3af";return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"16px 1fr auto",gap:12,alignItems:"center",padding:12,borderRadius:8,border:"1px solid #e5e7eb",background:W},children:[l.jsx("div",{style:{width:12,height:12,borderRadius:9999,background:I}}),l.jsxs("div",{style:{minWidth:0},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:l.jsx("div",{style:{fontWeight:600,fontSize:14},children:f})}),o==="face"&&l.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginTop:8},children:[l.jsx("video",{ref:B,muted:!0,playsInline:!0,autoPlay:!0,style:{width:180,height:112,background:"#000",borderRadius:6}}),s==="running"&&l.jsxs("div",{style:{color:"#6b7280",fontSize:12},children:["Analyzing frames: ",E]})]}),o==="microphone"&&s!=="pending"&&l.jsx("div",{style:{marginTop:6,width:220,height:8,background:"#e5e7eb",borderRadius:9999,overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(100,Math.round(x*200))}%`,height:8,background:"#10b981",transition:"width 150ms"}})}),h[o]&&l.jsx("div",{style:{marginTop:6,color:"#dc2626",fontSize:12},children:h[o]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("div",{style:{fontSize:12,padding:"2px 8px",borderRadius:9999,background:s==="passed"?"#111827":s==="failed"?"#fee2e2":"#e5e7eb",color:s==="passed"?"#fff":"#111827"},children:s==="passed"?"Passed":s==="running"?"Checking…":s==="failed"?"Failed":"Pending"}),s==="failed"&&l.jsx("button",{onClick:()=>We(o),style:{fontSize:12,padding:"6px 10px",borderRadius:6,background:"#111827",color:"#fff",border:0},children:"Retry"})]})]},o)})})]})})}function mn(t){const{onEvent:i,context:a="coding"}=t||{},[p,y]=n.useState("idle"),[E,M]=n.useState(void 0),[x,d]=n.useState(0),[h,c]=n.useState(0),g=n.useRef(null),D=n.useRef(null),P=n.useRef(null),X=n.useRef(!1),ie=n.useRef(!1),le=n.useRef(null),B=n.useRef(0),T=n.useRef(null),Ce=n.useRef(0),we=n.useCallback(()=>{P.current&&cancelAnimationFrame(P.current),P.current=null;try{g.current?.dispose()}catch{}g.current=null;try{D.current?.getTracks().forEach(C=>C.stop())}catch{}D.current=null,y("idle")},[]),Fe=n.useCallback(C=>{const N=Date.now(),xe=10,G=30,te=ie.current||!!le.current&&B.current>G||B.current>G,H=C>=xe;te&&H?(T.current==null&&(T.current=N),N-(T.current??N)>100&&N-Ce.current>2e3&&(c(We=>We+1),Ce.current=N,T.current=null,i?.({eventType:"audio_anomaly",severity:"warning",context:a,data:{level:C,lipsActivityPct:B.current,reason:"audio_with_lips"}}))):T.current=null},[a,i]),_e=n.useCallback(()=>{try{if(!g.current)return;const C=g.current.getLevel(),N=Math.max(0,Math.min(100,Math.round(C*160)));d(N),Fe(N)}finally{P.current=requestAnimationFrame(_e)}},[Fe]),J=n.useCallback(async C=>{try{M(void 0),c(0),T.current=null,Ce.current=0;let N=C;if(!N&&typeof window<"u"&&window.precheckAudioStream){const te=window.precheckAudioStream;te?.active&&te.getAudioTracks().length>0&&(N=te)}N||(N=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}})),D.current=N;const xe=N.getAudioTracks(),G=xe.length?new MediaStream(xe):N;g.current=on(G),y("running"),P.current=requestAnimationFrame(_e)}catch(N){y("error"),M(N instanceof Error?N.message:String(N))}},[_e]),ye=n.useCallback(C=>{X.current=C},[]),V=n.useCallback(C=>{typeof C.moving=="boolean"&&(ie.current=C.moving),typeof C.open<"u"&&(le.current=C.open),typeof C.activityPct=="number"&&!Number.isNaN(C.activityPct)&&(B.current=Math.max(0,Math.min(100,Math.round(C.activityPct))))},[]);return n.useEffect(()=>we,[we]),{status:p,error:E,level:x,anomalyCount:h,start:J,stop:we,setFaceDetected:ye,setMouthState:V}}function Dt(t){return Math.max(0,Math.min(1,t))}function rn(t){let i=0;for(const p in t)i+=t[p];if(i<=0)return t;const a={};for(const p in t)a[p]=t[p]/i;return a}function pn(t={}){const i=t.alpha??.45;let a=null;const p=["neutral","happy","surprised","focused","concerned"];function y(E,M={}){const{landmarks:x,headPose:d}=M,{data:h,width:c,height:g}=E;let D=0,P=0,X=0;for(let R=0;R<g;R++)for(let O=0;O<c;O++){const j=(R*c+O)*4,Se=h[j],me=h[j+1],ae=h[j+2],Z=(Se+me+ae)/3;if(D+=Z,O>0){const pe=(R*c+(O-1))*4,Le=(h[pe]+h[pe+1]+h[pe+2])/3;P+=Math.abs(Z-Le)}if(R>0){const pe=((R-1)*c+O)*4,Le=(h[pe]+h[pe+1]+h[pe+2])/3;Math.abs(Z-Le)>26&&X++}}const ie=Math.max(1,h.length/4),le=D/ie,B=P/ie,T=X/ie,Ce=Math.floor(g*.6),we=Math.floor(c*.22),Fe=Math.ceil(c*.78);let _e=0,J=0,ye=0,V=0,C=0,N=0,xe=0,G=0;const te=Math.max(2,Math.floor((Fe-we)*.18));let H=0,De=0,We=0,Ge=0;for(let R=Ce;R<g;R++)for(let O=we;O<Fe;O++){const j=(R*c+O)*4,Se=h[j],me=h[j+1],ae=h[j+2],Z=(Se+me+ae)/3,pe=(h[j-4]+h[j-3]+h[j-2])/3,Le=(h[j+4]+h[j+5]+h[j+6])/3;(Math.abs(Z-pe)>24||Math.abs(Z-Le)>24)&&_e++,Z<70&&ye++,Z>165&&V++,R<Ce+Math.floor((g-Ce)*.4)?(C+=Z,N++):(xe+=Z,G++),O<we+te&&((Math.abs(Z-pe)>24||Math.abs(Z-Le)>24)&&H++,De++),O>Fe-te&&((Math.abs(Z-pe)>24||Math.abs(Z-Le)>24)&&We++,Ge++),J++}const $e=J?_e/J:0,Ke=J?ye/J:0,o=J?V/J:0,f=Dt(($e-.012)/.06),s=N?C/N:0,W=G?xe/G:0,I=Dt((s-W-6)/28),ce=De?H/De:0,Pe=Ge?We/Ge:0,be=Dt(((ce+Pe)/2-.018)/.05);let He=0,Ue=0;const Be=Math.max(0,Math.floor(g*.18)),pt=Math.floor(g*.38);for(let R=Be;R<pt;R++)for(let O=1;O<c-1;O++){const j=(R*c+O)*4,Se=(h[j]+h[j+1]+h[j+2])/3,me=(h[j-4]+h[j-3]+h[j-2])/3,ae=(h[j+4]+h[j+5]+h[j+6])/3;(Math.abs(Se-me)>26||Math.abs(Se-ae)>26)&&He++,Ue++}const ut=Ue?He/Ue:0,lt=Dt((ut-.012)/.06);let de=.5;if(x&&x.length>=2){const R=x[0],O=x[1],j=Math.abs(O[1]-R[1]);de=Dt(1-j/Math.max(1,g*.25))}const he=d?Math.min(45,Math.abs(d.yaw)):0,nt=d?Math.min(45,Math.abs(d.pitch)):0,Ye=Math.max(0,1-(he/35+nt/30)/2),Xe=Dt((B-12)/18),rt=f>.22,ft=Ke>.12,ot=lt>.2,dt=!rt&&!ot,gt={neutral:Math.max(.001,.28+.28*Ye+.06*de-.16*f-.06*T+(dt?.08:0)),happy:Math.max(.001,.1+.62*f+.08*I+.06*be+(ft?.04:0)+(o>.15?.04:0)-.1*(1-Ye)),surprised:Math.max(.001,.06+(rt&&ft?.16:.02)+.45*f+(d&&d.pitch>10?.1:0)),focused:Math.max(.001,.18+.6*Ye+.22*Xe+.06*de-.08*f+(dt?.06:0)),concerned:Math.max(.001,.06+(ot?.16:.02)+.45*lt+(le<100?.06:0)+(d&&d.pitch<-10?.06:0)-.06*(I+f))};let je=rn(gt);if(a){const R={...a};for(const O of p)R[O]=(1-i)*a[O]+i*je[O];je=rn(R)}a=je;let at="neutral",yt=-1;for(const R of p){const O=je[R];O>yt&&(yt=O,at=R)}const vt=je[at];return{dominant:at,confidence:vt,emotions:je}}return{analyze:y}}let Ht,Yt;async function gn(t){if(Ht&&Yt)return{FaceLandmarker:Ht,FilesetResolver:Yt};const i=await Promise.resolve().then(()=>require("./vision_bundle-9Th4cf2B.cjs"));return Ht=i.FaceLandmarker,Yt=i.FilesetResolver,{FaceLandmarker:Ht,FilesetResolver:Yt}}async function yn(t={}){const i=t.wasmRoot||"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm",a=t.modelAssetPath||"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/latest/face_landmarker.task",p=t.runningMode||"VIDEO",{FaceLandmarker:y,FilesetResolver:E}=await gn(),M=await E.forVisionTasks(i),x=await y.createFromOptions(M,{baseOptions:{modelAssetPath:a},runningMode:p,numFaces:1,minFaceDetectionConfidence:.2,minFacePresenceConfidence:.2,minTrackingConfidence:.2,outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}),d={horiz:t.thresholds?.horiz??.4,vert:t.thresholds?.vert??.55,yaw:t.thresholds?.yaw??19,pitch:t.thresholds?.pitch??24,offDwell:t.thresholds?.offDwell??4,onDwell:t.thresholds?.onDwell??3,calibFrames:t.thresholds?.calibFrames??45};let h={x:0,y:0};const c=.35;let g=0,D=0,P=null,X=0,ie=0,le=0,B=0,T=0;const Ce=3,we=2,Fe=3,_e=2;let J=!0,ye=0;const V=d.calibFrames;let C={x:0,y:0};const N=d.offDwell,xe=d.onDwell;async function G(H,De){if(!H||!x)return null;const We=De??performance.now(),Ge=H.videoWidth||H.width||0,$e=H.videoHeight||H.height||0,Ke=H.readyState??0;if(!Ge||!$e||Ke<2)return null;const o=x.detectForVideo(H,We);if(!o||!o.faceLandmarks||o.faceLandmarks.length===0)return null;const f=o.faceBlendshapes?.[0]?.categories||[],s=ge=>f.find(fe=>fe.categoryName===ge)?.score||0,W=s("eyeLookInLeft"),I=s("eyeLookOutLeft"),ce=s("eyeLookUpLeft"),Pe=s("eyeLookDownLeft"),be=s("eyeLookInRight"),He=s("eyeLookOutRight"),Ue=s("eyeLookUpRight"),Be=s("eyeLookDownRight"),pt=He-be,ut=W-I,lt=Ue-Be,de=ce-Pe;let he=(pt+ut)/2,nt=(lt+de)/2;he=Math.max(-1,Math.min(1,he)),nt=Math.max(-1,Math.min(1,nt)),h.x=c*he+(1-c)*h.x,h.y=c*nt+(1-c)*h.y;const Ye=s("jawOpen"),Xe=s("mouthOpen"),rt=s("mouthFunnel"),ft=s("mouthPucker"),ot=s("mouthSmileLeft"),dt=s("mouthSmileRight"),gt=s("mouthPressLeft"),je=s("mouthPressRight"),at=s("mouthStretchLeft"),yt=s("mouthStretchRight"),vt=s("mouthLowerDownLeft"),R=s("mouthLowerDownRight"),O=s("mouthUpperUpLeft"),j=s("mouthUpperUpRight"),Se=[Ye,Xe,rt,ft,ot,dt,gt,je,at,yt,vt,R,O,j];let me=0;if(P!=null)for(let ge=0;ge<Se.length;ge++)me+=Math.abs(Se[ge]-P[ge]);P=Se,X=.3*me+.7*X;let ae=Math.max(Xe,Ye);const Z=Math.max(0,(vt+R+O+j)/4);ae=Math.max(ae,Z),ae=Math.max(0,Math.min(1,ae));const pe=ae>.35,Le=X>.06;pe?(ie++,le=Math.max(0,le-1)):(le++,ie=Math.max(0,ie-1)),Le?(B++,T=Math.max(0,T-1)):(T++,B=Math.max(0,B-1));const Mt=ie>=Ce?!0:le>=we?!1:void 0,kt=B>=Fe?!0:T>=_e?!1:void 0;J&&(Math.abs(h.x)<.6&&Math.abs(h.y)<.6&&(C.x=(C.x*ye+h.x)/(ye+1),C.y=(C.y*ye+h.y)/(ye+1),ye+=1),ye>=V&&(J=!1));const Ie=h.x-C.x,ze=h.y-C.y;let ue,se;try{const ge=o.facialTransformationMatrixes?.[0];if(ge&&ge.rows===4&&ge.columns===4){const fe=ge.data,Te=fe[0],ve=fe[1],_t=fe[2],ht=fe[4],e=fe[5],r=fe[6],u=fe[8],w=fe[9],A=fe[10];se=Math.atan2(-w,A)*(180/Math.PI),ue=Math.atan2(-_t,Te)*(180/Math.PI)}}catch{}const Je=Math.abs(Ie),Oe=Math.abs(ze),Pt=Je>d.horiz,Ft=Oe>d.vert,wt=ue!==void 0&&Math.abs(ue)>d.yaw||se!==void 0&&Math.abs(se)>d.pitch,Et=Pt||Ft||wt;let st=!0;return Et?(g+=1,D=Math.max(0,D-1)):(D+=1,g=Math.max(0,g-1)),g>=N&&(st=!1),D>=xe&&(st=!0),{onScreen:st,gaze:{x:Ie,y:ze},confidence:Math.min(1,.65+.35*Math.max(Je,Oe)),head:{yaw:ue,pitch:se},debug:{lIn:W,lOut:I,lUp:ce,lDn:Pe,rIn:be,rOut:He,rUp:Ue,rDn:Be,gx:he,gy:nt,emaX:h.x,emaY:h.y,yaw:ue??0,pitch:se??0,offFrames:g,onFrames:D,baseX:C.x,baseY:C.y,absX:Je,absY:Oe,jawOpen:Ye,mouthOpenBS:Xe,activity:X,openScore:ae},mouth:{open:Mt??ae>.5,openScore:ae,moving:kt??X>.08,activity:X}}}async function te(){try{x?.close?.()}catch{}}return{ready:!0,estimate:G,close:te}}const vn=(t,i,a)=>{if(t.width<=0||t.height<=0||i<=0||a<=0)return!1;const p=Math.max(8,Math.floor(i*.05)),y=Math.max(12,Math.floor(a*.08));if(t.x<p||t.y<y||t.x+t.width>i-p||t.y+t.height>a-y)return!1;const E=t.width*t.height,M=i*a,x=E/M;if(x<.08||x>.55)return!1;const d=t.width/i,h=t.height/a;if(d<.15||h<.18)return!1;const c=t.width/t.height;return!(c<.7||c>1.5)};function sn({monitoringStatus:t,sessionData:i,onStatusChange:a,onUpdateSession:p,onAddEvent:y,onAddSnapshot:E,gazeThresholds:M}){const[x,d]=n.useState({x:typeof window<"u"?window.innerWidth-280:0,y:typeof window<"u"?window.innerHeight-400:0}),[h,c]=n.useState(!1),[g,D]=n.useState({x:0,y:0}),[P,X]=n.useState(0),[ie,le]=n.useState(!1),[B,T]=n.useState(null),[Ce,we]=n.useState(null),[Fe,_e]=n.useState(null),[J,ye]=n.useState(0),[V,C]=n.useState(0),[N,xe]=n.useState([]),[G,te]=n.useState(0),[H,De]=n.useState(0),[We,Ge]=n.useState(0),[$e,Ke]=n.useState(0),[o,f]=n.useState(0),[s,W]=n.useState(!1),[I,ce]=n.useState(null),[Pe,be]=n.useState(null),[He,Ue]=n.useState(!1),[Be,pt]=n.useState(0),[ut,lt]=n.useState(null),[de,he]=n.useState(null),[nt,Ye]=n.useState(0),[Xe,rt]=n.useState(0),[ft,ot]=n.useState(0),[dt,gt]=n.useState(null),[je,at]=n.useState(0),[yt,vt]=n.useState(0),R=n.useRef(null),O=n.useRef(null),j=n.useRef(null),Se=n.useRef(null),me=n.useRef(null),ae=n.useRef(null),Z=n.useRef(null),pe=n.useRef(0),Le=n.useRef(null),Mt=n.useRef(!1),kt=n.useRef(0),Ie=n.useRef(0),ze=n.useRef("none"),ue=n.useRef({noFace:0,multipleFaces:0}),se=n.useRef({noFace:!1,multipleFaces:!1,gazeOff:!1}),Je=n.useRef(!1),Oe=n.useRef({offFrames:0,onFrames:0}),Pt=M?.fallback?.offFrames??8,Ft=M?.fallback?.onFrames??5,wt={yaw:M?.fallback?.yaw??32,pitch:M?.fallback?.pitch??26,centerOffset:M?.fallback?.centerOffset??.35},Et=n.useRef(null),st=n.useRef([]),ge=n.useRef(0),fe=n.useRef(!1),Te=n.useRef({yaw:0,pitch:0,roll:0,initialized:!1}),ve=n.useRef({isGood:!0,goodStreak:0,poorStreak:0}),_t=8,ht=.25,{level:e,anomalyCount:r,start:u,stop:w,setFaceDetected:A,setMouthState:U}=mn({context:"coding",onEvent:m=>y?.({...m,timestamp:Date.now()})});n.useEffect(()=>ye(e),[e]),n.useEffect(()=>C(r),[r]),n.useEffect(()=>{Et.current=pn({alpha:.5})},[]);const F=n.useCallback((m,v)=>{const b=v.data,Q=v.width,Y=v.height,z=Math.max(0,Math.floor(m.x-m.width*.2)),$=Math.min(Q,Math.floor(m.x+m.width*1.2)),L=Math.min(Y-1,Math.floor(m.y+m.height*1.05)),_=Math.min(Y,L+Math.floor(m.height*1.6));if(_<=L||$<=z)return{isProfessional:!1,hasShirt:!1,confidence:.4,details:"Insufficient torso ROI"};let Me=0,bt=0,Tt=0,it=0,St=0;const qe=Math.floor((z+$)/2);for(let et=L;et<_;et++)for(let Ae=z;Ae<$;Ae++){const tt=(et*Q+Ae)*4,ct=b[tt],ee=b[tt+1],K=b[tt+2],Ee=Math.max(ct,ee,K),Rt=Math.min(ct,ee,K),Ut=Ee,Bt=Ee?(Ee-Rt)/Ee:0;if(Ut>60&&Ut<210&&Bt<.45&&ct>40&&ee>20&&K>20&&ct>K)continue;if((ct+ee+K)/3<105&&Me++,(Math.abs(ct-ee)>28||Math.abs(ee-K)>28)&&bt++,Tt+=Bt,it++,et<L+(_-L)*.35&&Math.abs(Ae-qe)<Math.max(6,Math.floor(m.width*.08))&&Ae>z+1&&Ae<$-1){const jt=(et*Q+(Ae-1))*4,Vt=(et*Q+(Ae+1))*4,Lt=(ct+ee+K)/3,qt=(b[jt]+b[jt+1]+b[jt+2])/3,Ct=(b[Vt]+b[Vt+1]+b[Vt+2])/3;(Math.abs(Lt-qt)>28||Math.abs(Lt-Ct)>28)&&St++}}if(!it)return{isProfessional:!1,hasShirt:!1,confidence:.4,details:"Insufficient torso pixels"};const S=Me/it,oe=bt/it,Ze=Tt/it,mt=St/it,Qe=S>.18||Ze<.35,ke=S>.35&&oe<.22||Ze<.28&&oe<.18||mt>.002,At=Math.max(.5,Math.min(.95,.55+(Qe?.15:0)+(ke?.15:0)-oe*.2));return{isProfessional:ke,hasShirt:Qe,confidence:At,details:ke?"Professional attire (solid/low-saturation)":Qe?"Casual attire":"Torso not clearly visible"}},[]),k=n.useCallback(m=>{if(!m.landmarks||m.landmarks.length<4)return null;const v=m.landmarks,b=v[0],Q=v[1],Y=v[2],z=v[3]??[(Q[0]+b[0])/2,Math.max(Q[1],b[1])+m.height*.2],$=[(Q[0]+b[0])/2,(Q[1]+b[1])/2],L=Q[0]-b[0],_=Q[1]-b[1],Me=Math.max(1,Math.hypot(L,_)),bt=Math.atan2(_,L)*180/Math.PI,Tt=Math.hypot(Y[0]-b[0],Y[1]-b[1]),it=Math.hypot(Y[0]-Q[0],Y[1]-Q[1]),St=(Tt-it)/Me,qe=Math.max(-45,Math.min(45,St*90)),S=Math.max(1,Y[1]-$[1]),oe=Math.max(1,(z[1]??$[1])-Y[1]),Ze=(S-oe)/m.height,mt=Math.max(-45,Math.min(45,Ze*180)),Qe=Math.abs(bt)>20,ke=Math.abs(St)>.18,At=Math.abs(mt)>15,et=ke||At||Qe,Ae=Math.max(.5,Math.min(1,Math.max(Math.abs(St)*2,Math.abs(bt)/30,Math.abs(mt)/30)));return{yaw:qe,pitch:mt,roll:bt,isHeadTurned:et,confidence:Ae}},[]),ne=n.useCallback((m=.8)=>{const v=R.current,b=O.current;if(!v||!b)return null;const Q=v.videoWidth||320,Y=v.videoHeight||240;if(v.readyState<2)return null;b.width=Q,b.height=Y;const z=b.getContext("2d",{willReadFrequently:!0});if(!z)return null;z.drawImage(v,0,0,Q,Y);try{return b.toDataURL("image/jpeg",m)}catch{return null}},[]),q=n.useCallback(m=>{if(E){E(m);return}if(p){let b=[...i?.snapshots||[],m];b.length>50&&(b=b.slice(b.length-50)),p({snapshots:b})}},[E,p,i?.snapshots]),re=n.useCallback(()=>{if(ge.current>=5||fe.current)return;fe.current=!0;const m=ne(.85);if(m){q({timestamp:Date.now(),type:"random_webcam",image:m,context:"Random webcam snapshot during coding"}),ge.current+=1,fe.current=!1;return}const v=window.setTimeout(()=>{const b=ne(.85);b&&(q({timestamp:Date.now(),type:"random_webcam",image:b,context:"Random webcam snapshot (retry) during coding"}),ge.current+=1),fe.current=!1},3e3);st.current.push(v)},[q,ne]),Ne=n.useCallback(async()=>{try{const m=await Promise.resolve().then(()=>require("./index-x7BUnCGZ.cjs")),v=await Promise.resolve().then(()=>require("./blazeface.esm-BsJ4BrW4.cjs"));m.ready&&await m.ready();const b=await v.load();return Se.current=b,!0}catch(m){return console.error("[widget] Failed to init face detection:",m),!1}},[]),xt=(m,v)=>{const b=Math.max(m.x,v.x),Q=Math.max(m.y,v.y),Y=Math.min(m.x+m.width,v.x+v.width),z=Math.min(m.y+m.height,v.y+v.height),$=Math.max(0,Y-b),L=Math.max(0,z-Q),_=$*L,Me=m.width*m.height+v.width*v.height-_;return Me>0?_/Me:0},Ve=n.useCallback(async()=>{if(Je.current){me.current=requestAnimationFrame(Ve);return}if(Je.current=!0,!R.current||!O.current||!Se.current){me.current=requestAnimationFrame(Ve),Je.current=!1;return}const m=R.current,v=O.current;if(m.readyState!==4){me.current=requestAnimationFrame(Ve),Je.current=!1;return}try{const b=await Se.current.estimateFaces(m,!1),Q=m.videoWidth||m.width||v.width,Y=m.videoHeight||m.height||v.height,$=b.map(S=>{const[oe,Ze]=S.topLeft,[mt,Qe]=S.bottomRight;return{x:oe,y:Ze,width:mt-oe,height:Qe-Ze,confidence:S.probability?.[0]||.8,landmarks:S.landmarks}}).filter(S=>(S.confidence||0)<.6?!1:vn(S,Q,Y));$.sort((S,oe)=>oe.confidence-S.confidence);const L=[];$.forEach(S=>{L.some(Ze=>xt(S,Ze)>.45)||L.push(S)}),X(L.length),xe(L),le(L.length===1),A(L.length>0);const _=Date.now(),Me=L.length===0?"none":L.length===1?"single":"multiple";Me==="multiple"?ue.current.multipleFaces+=1:ue.current.multipleFaces=Math.max(0,ue.current.multipleFaces-1),Me==="none"?ue.current.noFace+=1:ue.current.noFace=Math.max(0,ue.current.noFace-1);const bt=3,Tt=2,it=3,St=2;let qe=ze.current;if(ze.current!=="multiple"?ue.current.multipleFaces>=bt?qe="multiple":qe=Me==="none"?"single":Me:ue.current.multipleFaces<=Tt&&(qe=Me==="multiple"?"multiple":"single"),qe!=="none"?ue.current.noFace>=it&&(qe="none"):ue.current.noFace<=St&&(qe=Me==="none"?"none":"single"),qe==="multiple"){if(ze.current!=="multiple"&&(lt(_),ot(S=>S+1),!se.current.multipleFaces)){se.current.multipleFaces=!0,y?.({eventType:"face_detection",severity:"warning",context:"coding",data:{reason:"multiple_faces",count:L.length},timestamp:_});const S=ne(.85);S&&q({timestamp:_,type:"violation_trigger",image:S,context:"Multiple faces detected"})}}else{if(ze.current==="multiple"&&ut!==null){const S=_-ut;Ye(oe=>oe+S),lt(null)}se.current.multipleFaces=!1}if(qe==="none"){if(ze.current!=="none"&&(gt(_),at(S=>S+1),!se.current.noFace)){se.current.noFace=!0,y?.({eventType:"face_detection",severity:"critical",context:"coding",data:{reason:"no_face"},timestamp:_});const S=ne(.85);S&&q({timestamp:_,type:"violation_trigger",image:S,context:"No face detected"})}}else{if(ze.current==="none"&&dt!==null){const S=_-dt;vt(oe=>oe+S),gt(null)}se.current.noFace=!1}if(ze.current=qe,L.length===1){const S=L[0],oe=v.getContext("2d",{willReadFrequently:!0});if(oe){oe.drawImage(m,0,0,v.width,v.height);const Ze=oe.getImageData(0,0,v.width,v.height),mt=oe.getImageData(S.x,S.y,S.width,S.height);let Qe={isGoodPosture:!0,shoulderAlignment:0,headTilt:0,confidence:.7};const ke=k(S);if(ke){Te.current.initialized?(Te.current.yaw=ht*ke.yaw+(1-ht)*Te.current.yaw,Te.current.pitch=ht*ke.pitch+(1-ht)*Te.current.pitch,Te.current.roll=ht*ke.roll+(1-ht)*Te.current.roll):Te.current={yaw:ke.yaw,pitch:ke.pitch,roll:ke.roll,initialized:!0};const ee=Te.current.yaw,K=Te.current.pitch,Ee=Te.current.roll,Rt=Math.abs(Ee)<=10&&Math.abs(K)<=12&&Math.abs(ee)<=18;Rt!==ve.current.isGood?Rt?(ve.current.goodStreak+=1,ve.current.poorStreak=0,ve.current.goodStreak>=_t&&(ve.current.isGood=!0,ve.current.goodStreak=0)):(ve.current.poorStreak+=1,ve.current.goodStreak=0,ve.current.poorStreak>=_t&&(ve.current.isGood=!1,ve.current.poorStreak=0)):(ve.current.goodStreak=0,ve.current.poorStreak=0),Qe={isGoodPosture:ve.current.isGood,shoulderAlignment:-Ee,headTilt:K,confidence:Math.min(1,.6+.4*ke.confidence)}}let At=null;if(Et.current){const ee=Et.current.analyze(mt,{landmarks:S.landmarks,headPose:ke??null});At={dominant:ee.dominant,confidence:ee.confidence,emotions:ee.emotions}}const et=F(S,Ze),Ae=ke??k(S);T(Qe),we(At),_e(et);let tt=null;if(Z.current&&m)try{const ee=performance?.now?.()||Date.now();let K=Le.current;if(ee-pe.current>=70&&(K=await Z.current.estimate(m,ee),pe.current=ee,Le.current=K),tt=K?.onScreen??null,K?.mouth){be(K.mouth.open),Ue(K.mouth.moving);const Ee=Math.round(Math.min(1,Math.max(0,K.mouth.activity))*100);pt(Ee);try{U({open:K.mouth.open,moving:K.mouth.moving,activityPct:Ee})}catch{}}if(tt!==null&&ce(tt),tt===!1&&!s&&Date.now()-Ie.current>3e3)f(Ee=>Ee+1),W(!0),he(_),Ie.current=Date.now(),ce(!1),se.current.gazeOff||(se.current.gazeOff=!0,y?.({eventType:"gaze_tracking",severity:"warning",context:"coding",data:{offscreen:!0,headPose:Ae,gaze:K},timestamp:_}));else if(tt===!0&&s){if(de!==null){const Ee=_-de;rt(Rt=>Rt+Ee),he(null)}W(!1),se.current.gazeOff=!1,ce(!0)}}catch{tt=null}if(tt===null){const ee=v.width,K=v.height,Ee=S.x+S.width/2,Rt=S.y+S.height/2,Ut=Math.hypot((Ee-ee/2)/ee,(Rt-K/2)/K),Bt=Ae?.yaw??0,Qt=Ae?.pitch??0,Kt=Math.abs(Bt)>wt.yaw||Math.abs(Qt)>wt.pitch,jt=Ut>wt.centerOffset;Kt||jt?(Oe.current.offFrames+=1,Oe.current.onFrames=Math.max(0,Oe.current.onFrames-1)):(Oe.current.onFrames+=1,Oe.current.offFrames=Math.max(0,Oe.current.offFrames-1));const Lt=Oe.current.offFrames>=Pt,qt=Oe.current.onFrames>=Ft;if(ce(Ct=>qt?!0:Lt?!1:Ct),Lt&&!s&&Date.now()-Ie.current>3e3)f(Ct=>Ct+1),W(!0),he(_),Ie.current=Date.now(),ce(!1),se.current.gazeOff||(se.current.gazeOff=!0,y?.({eventType:"gaze_tracking",severity:"warning",context:"coding",data:{offscreen:!0,reason:Kt?"head_pose":"center_offset",headPose:Ae},timestamp:_}));else if(qt&&s){if(de!==null){const Ct=_-de;rt(un=>un+Ct),he(null)}W(!1),se.current.gazeOff=!1,ce(!0)}}const ct=L.length===0||L.length>1;if(p&&(ct||_-kt.current>=5e3)){if(ct){const ee=ne(.85);ee&&q({timestamp:_,type:"violation_trigger",image:ee,context:L.length===0?"No face detected":"Multiple faces detected"})}p({postureAnalysis:Qe,attireAnalysis:et}),kt.current=_}}}else{if(T(null),we(null),_e(null),s){if(de!==null){const S=_-de;rt(oe=>oe+S),he(null)}W(!1)}ce(null)}L.length===0?a?.("violation"):L.length>1?a?.("warning"):a?.("optimal")}catch(b){console.error("[widget] Face detection error:",b)}finally{me.current=requestAnimationFrame(Ve),Je.current=!1}},[F,a,p,i?.snapshots,s,ut,de,A]);n.useEffect(()=>{C(0)},[]),n.useEffect(()=>{(async()=>{try{const z=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},frameRate:{ideal:15}},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});R.current&&(R.current.srcObject=z,R.current.onloadedmetadata=async()=>{try{await R.current.play?.()}catch{}try{const _=R.current;_?.videoWidth&&_?.videoHeight&&(_.width=_.videoWidth,_.height=_.videoHeight)}catch{}});let $=null;const L=z.getAudioTracks();L.length>0&&($=new MediaStream(L),ae.current=$),await Ne();try{Z.current=await yn({thresholds:M?.mediapipe})}catch{}$&&await u($),me.current=requestAnimationFrame(Ve)}catch{a?.("violation")}})();const v=5,b=[60*1e3,5*60*1e3],Q=Math.max(0,v-b.length),Y=[...b];if(Q>0)for(let L=0;L<Q;L++){const _=42e4+Math.random()*18e4,Me=(Math.random()-.5)*30*1e3;Y.push(Math.max(0,Math.floor(_+Me)))}Y.sort((z,$)=>z-$);for(let z=1;z<Y.length;z++)Math.abs(Y[z]-Y[z-1])<10*1e3&&(Y[z]+=12*1e3);return Y.forEach(z=>{const $=window.setTimeout(()=>re(),z);st.current.push($)}),()=>{Mt.current=!0,me.current&&cancelAnimationFrame(me.current),R.current?.srcObject&&R.current.srcObject.getTracks().forEach($=>$.stop()),ae.current&&ae.current.getTracks().forEach(z=>z.stop()),w(),ae.current=null,Z.current?.close?.(),st.current.forEach(z=>window.clearTimeout(z)),st.current=[]}},[]);const Re=m=>{c(!0);const v=j.current?.getBoundingClientRect();v&&D({x:m.clientX-v.left,y:m.clientY-v.top})},Ot=m=>{if(h){const v=Math.max(0,Math.min((typeof window<"u"?window.innerWidth:0)-280,m.clientX-g.x)),b=Math.max(0,Math.min((typeof window<"u"?window.innerHeight:0)-400,m.clientY-g.y));d({x:v,y:b})}},Nt=()=>c(!1);n.useEffect(()=>{if(h)return document.addEventListener("mousemove",Ot),document.addEventListener("mouseup",Nt),()=>{document.removeEventListener("mousemove",Ot),document.removeEventListener("mouseup",Nt)}},[h,g]);const Wt=()=>{document.hidden&&De(m=>{const v=m+1;return y?.({eventType:"tab_switch",severity:"critical",context:"coding",data:{when:Date.now()},timestamp:Date.now()}),v})},Jt=()=>te(m=>m+1),Zt=m=>{Ge(v=>v+1),y?.({eventType:"keystroke",severity:"info",context:"coding",data:{},timestamp:Date.now()}),(m.ctrlKey||m.metaKey)&&(m.key==="c"||m.key==="x"||m.key==="v")&&(Ke(v=>v+1),m.preventDefault(),y?.({eventType:"keystroke",severity:"warning",context:"coding",data:{copyCutPaste:!0,key:m.key},timestamp:Date.now()}))};n.useEffect(()=>(document.addEventListener("visibilitychange",Wt),window.addEventListener("blur",Jt),document.addEventListener("keydown",Zt),()=>{document.removeEventListener("visibilitychange",Wt),window.removeEventListener("blur",Jt),document.removeEventListener("keydown",Zt)}),[]);const cn=P===0?"#ef4444":P>1?"#f59e0b":"#22c55e";return l.jsxs("div",{ref:j,onMouseDown:Re,style:{position:"fixed",left:x.x,top:x.y,zIndex:9999,width:288,cursor:"move",border:`2px solid ${cn}`,borderRadius:8,background:"#fff",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",padding:12,userSelect:"none"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:l.jsx("div",{style:{fontSize:12,fontWeight:600},children:P===0?"No Face":P>1?"Multiple Faces":ie?"Optimal":"Good"})}),l.jsxs("div",{style:{position:"relative",background:"#000",borderRadius:4,overflow:"hidden"},children:[l.jsx("video",{ref:R,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:128,objectFit:"cover"}}),l.jsx("canvas",{ref:O,width:320,height:240,style:{display:"none"}})]}),l.jsxs("div",{style:{marginTop:8,fontSize:12,display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[l.jsxs("div",{children:["Faces: ",l.jsx("strong",{style:{color:P===1?"#16a34a":"#ef4444"},children:P})]}),l.jsxs("div",{children:["No Face: ",l.jsx("strong",{style:{color:je>0?"#ef4444":"#16a34a"},children:je})]}),l.jsxs("div",{children:["Multiple: ",l.jsx("strong",{style:{color:ft>0?"#ef4444":"#16a34a"},children:ft})]}),l.jsxs("div",{children:["Posture: ",l.jsx("strong",{style:{color:B?.isGoodPosture?"#16a34a":"#f59e0b"},children:B?.isGoodPosture?"Good":"Poor"})]}),l.jsxs("div",{children:["Attire: ",l.jsx("strong",{style:{color:Fe?.isProfessional?"#16a34a":"#f59e0b"},children:Fe?.isProfessional?"Professional":"Casual"})]}),l.jsxs("div",{children:["Emotion: ",l.jsx("strong",{style:{color:"#3b82f6"},children:Ce?.dominant||"Unknown"})]}),l.jsxs("div",{children:["Gaze: ",l.jsx("strong",{style:{color:I===null?"#9ca3af":I?"#16a34a":"#ef4444"},children:I===null?"--":I?"On":"Off"})]}),l.jsxs("div",{children:["Mouth: ",l.jsx("strong",{style:{color:Pe===null?"#9ca3af":Pe?"#16a34a":"#111827"},children:Pe===null?"--":Pe?He?"Open+Moving":"Open":He?"Closed+Moving":"Closed"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Lip Act: ",l.jsxs("span",{style:{color:Be>30?"#16a34a":Be>10?"#f59e0b":"#9ca3af"},children:[Be,"%"]}),l.jsx("div",{style:{width:64,height:6,background:"#eee",borderRadius:9999,overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(Be,100)}%`,height:6,transition:"width 100ms",background:Be>30?"#16a34a":Be>10?"#f59e0b":"#9ca3af"}})})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Audio: ",l.jsxs("span",{style:{color:J>50?"#16a34a":J>20?"#f59e0b":"#ef4444"},children:[J,"%"]}),l.jsx("div",{style:{width:64,height:6,background:"#eee",borderRadius:9999,overflow:"hidden"},children:l.jsx("div",{style:{width:`${Math.min(J,100)}%`,height:6,transition:"width 100ms",background:J>50?"#16a34a":J>20?"#f59e0b":"#ef4444"}})})]}),l.jsxs("div",{children:["Audio Alerts: ",l.jsx("strong",{style:{color:V>0?"#ef4444":"#16a34a"},children:V})]}),l.jsxs("div",{children:["Unfocus: ",l.jsx("strong",{style:{color:G>0?"#ef4444":"#16a34a"},children:G})]}),l.jsxs("div",{children:["Tab Switch: ",l.jsx("strong",{style:{color:H>0?"#ef4444":"#16a34a"},children:H})]}),l.jsxs("div",{children:["Keystrokes: ",l.jsx("strong",{style:{color:"#3b82f6"},children:We})]}),l.jsxs("div",{children:["Copy Attempts: ",l.jsx("strong",{style:{color:$e>0?"#ef4444":"#16a34a"},children:$e})]}),l.jsxs("div",{children:["Gaze Off: ",l.jsx("strong",{style:{color:o>0?"#ef4444":"#16a34a"},children:o})]})]})]})}const $t=(t,i)=>t.length>i?t.slice(t.length-i):t,wn=(t,i)=>({sessionId:t,sessionType:"coding-assessment",startTime:Date.now(),preCheckResults:i,liveEvents:[],codingMetrics:{totalKeystrokes:0,linesOfCode:0,codeExecutions:0,externalCopyEvents:0,languageSwitches:0,averageTypingSpeed:0,codingTimeVsReadingTime:{coding:0,reading:0}},questionProgress:[],snapshots:[],sessionStats:{totalDuration:0,questionsAttempted:0,violationCount:0,tabSwitches:0,audioAnomalies:0,gazeDuration:0,focusBreaks:0,codeExecutionCount:0,noFaceIncidents:0,multipleFaceIncidents:0,unfocusEvents:0,gazeOffScreenIncidents:0,keystrokes:0,copyCutPasteAttempts:0}});function xn(t,i){switch(i.eventType){case"tab_switch":return{...t,tabSwitches:t.tabSwitches+1,violationCount:t.violationCount+1};case"audio_anomaly":return{...t,audioAnomalies:t.audioAnomalies+1,violationCount:t.violationCount+1};case"code_execution":return{...t,codeExecutionCount:t.codeExecutionCount+1};case"face_detection":{const a=i.data?.reason;return a==="no_face"?{...t,noFaceIncidents:t.noFaceIncidents+1,violationCount:t.violationCount+1}:a==="multiple_faces"?{...t,multipleFaceIncidents:t.multipleFaceIncidents+1,violationCount:t.violationCount+1}:t}case"gaze_tracking":{const a=i.data?.type==="focus_break",p=Number(i.data?.focusTimeMs)||0,y=i.data?.offscreen===!0;return{...t,focusBreaks:t.focusBreaks+(a?1:0),gazeDuration:t.gazeDuration+p,unfocusEvents:t.unfocusEvents+(a?1:0),gazeOffScreenIncidents:t.gazeOffScreenIncidents+(y?1:0),violationCount:t.violationCount+(a||y?1:0)}}case"keystroke":{const a=i.data?.copyCutPaste===!0;return{...t,keystrokes:t.keystrokes+1,copyCutPasteAttempts:t.copyCutPasteAttempts+(a?1:0),violationCount:t.violationCount+(a?1:0)}}default:return t}}function bn(t,i){switch(i.type){case"INIT":return{...i.payload};case"SET_FIELDS":{const a={...t,...i.payload};return a.snapshots&&(a.snapshots=$t(a.snapshots,50)),a.liveEvents&&(a.liveEvents=$t(a.liveEvents,200)),a}case"ADD_EVENTS":{const a=$t([...t.liveEvents,...i.events],200),p=i.events.reduce(xn,t.sessionStats);return{...t,liveEvents:a,sessionStats:p}}case"ADD_SNAPSHOT":{const a=$t([...t.snapshots,i.snapshot],50);return{...t,snapshots:a}}case"TICK":{const a=Math.max(0,i.now-t.startTime);return a===t.sessionStats.totalDuration?t:{...t,sessionStats:{...t.sessionStats,totalDuration:a}}}case"COMPLETE":{const a=i.endTime??Date.now();return{...t,sessionStats:{...t.sessionStats,totalDuration:Math.max(0,a-t.startTime)}}}default:return t}}function Sn(t){const[i,a]=n.useState(null),p=n.useCallback(c=>{a(g=>g&&bn(g,c))},[]),y=n.useRef(null),E=n.useRef(0),M=n.useRef(null),x=n.useCallback(c=>{const g=`session_${Date.now()}_${Math.random().toString(36).slice(2,9)}`;y.current=g;const D=sessionStorage.getItem(g);if(D)try{const X=JSON.parse(D);return a(X),g}catch{}const P=wn(g,c);return a(P),sessionStorage.setItem(g,JSON.stringify(P)),g},[t?.sessionId]),d=n.useCallback(c=>{const g=c??i;if(!(!g||!y.current))try{sessionStorage.setItem(y.current,JSON.stringify(g)),E.current=Date.now()}catch(D){console.error("[session] persist failed",D)}},[i]);return n.useEffect(()=>{if(!i)return;const g=Date.now()-E.current;return g<1e3?(M.current&&clearTimeout(M.current),M.current=setTimeout(()=>d(),1e3-g)):d(),()=>{M.current&&clearTimeout(M.current)}},[i,d]),n.useEffect(()=>{const c=()=>d();return window.addEventListener("visibilitychange",c),window.addEventListener("beforeunload",c),()=>{window.removeEventListener("visibilitychange",c),window.removeEventListener("beforeunload",c)}},[d]),n.useEffect(()=>{if(!i)return;const c=setInterval(()=>p({type:"TICK",now:Date.now()}),1e3);return()=>clearInterval(c)},[i,p]),n.useMemo(()=>({state:i,sessionId:y.current,init:x,setFields:c=>p({type:"SET_FIELDS",payload:c}),addEvents:c=>p({type:"ADD_EVENTS",events:c}),addSnapshot:c=>p({type:"ADD_SNAPSHOT",snapshot:c}),complete:()=>p({type:"COMPLETE"})}),[i,p,x])}function Rn({onSessionStart:t,onSessionUpdate:i,onEvent:a}){const[p,y]=n.useState(null),[E,M]=n.useState("optimal"),x=Sn();return n.useEffect(()=>{if(p&&!x.state){const d=x.init(p);t?.(d,p)}},[p,x]),p?l.jsx(sn,{monitoringStatus:E,sessionData:x.state??void 0,onStatusChange:d=>M(d),onUpdateSession:d=>{x.setFields(d),i?.(d)},onAddSnapshot:d=>x.addSnapshot(d),onAddEvent:d=>{x.addEvents([{...d,timestamp:d.timestamp??Date.now()}]),a?.(d)},gazeThresholds:{mediapipe:{horiz:.35,vert:.5,yaw:20,pitch:18,offDwell:5,onDwell:3,calibFrames:24},fallback:{yaw:24,pitch:20,centerOffset:.22,offFrames:5,onFrames:3}}}):l.jsx(an,{onComplete:d=>y(d),onError:()=>y(null)})}exports.FloatingVideo=sn;exports.Prechecks=an;exports.ProctoringWidget=Rn;
